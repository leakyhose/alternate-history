/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["app/rome/page"],{

/***/ "(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CYiming%20Su%5C%5CDesktop%5C%5Crepos%5C%5Croman-story%5C%5Cfrontend%5C%5Csrc%5C%5Capp%5C%5Crome%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CYiming%20Su%5C%5CDesktop%5C%5Crepos%5C%5Croman-story%5C%5Cfrontend%5C%5Csrc%5C%5Capp%5C%5Crome%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval(__webpack_require__.ts("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/rome/page.tsx */ \"(app-pages-browser)/./src/app/rome/page.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtZmxpZ2h0LWNsaWVudC1lbnRyeS1sb2FkZXIuanM/bW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q1VzZXJzJTVDJTVDWWltaW5nJTIwU3UlNUMlNUNEZXNrdG9wJTVDJTVDcmVwb3MlNUMlNUNyb21hbi1zdG9yeSU1QyU1Q2Zyb250ZW5kJTVDJTVDc3JjJTVDJTVDYXBwJTVDJTVDcm9tZSU1QyU1Q3BhZ2UudHN4JTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJnNlcnZlcj1mYWxzZSEiLCJtYXBwaW5ncyI6IkFBQUEsd0tBQTBIIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxVc2Vyc1xcXFxZaW1pbmcgU3VcXFxcRGVza3RvcFxcXFxyZXBvc1xcXFxyb21hbi1zdG9yeVxcXFxmcm9udGVuZFxcXFxzcmNcXFxcYXBwXFxcXHJvbWVcXFxccGFnZS50c3hcIik7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CYiming%20Su%5C%5CDesktop%5C%5Crepos%5C%5Croman-story%5C%5Cfrontend%5C%5Csrc%5C%5Capp%5C%5Crome%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("/**\n * @license React\n * react-jsx-dev-runtime.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n true &&\n  (function () {\n    function getComponentNameFromType(type) {\n      if (null == type) return null;\n      if (\"function\" === typeof type)\n        return type.$$typeof === REACT_CLIENT_REFERENCE\n          ? null\n          : type.displayName || type.name || null;\n      if (\"string\" === typeof type) return type;\n      switch (type) {\n        case REACT_FRAGMENT_TYPE:\n          return \"Fragment\";\n        case REACT_PROFILER_TYPE:\n          return \"Profiler\";\n        case REACT_STRICT_MODE_TYPE:\n          return \"StrictMode\";\n        case REACT_SUSPENSE_TYPE:\n          return \"Suspense\";\n        case REACT_SUSPENSE_LIST_TYPE:\n          return \"SuspenseList\";\n        case REACT_ACTIVITY_TYPE:\n          return \"Activity\";\n      }\n      if (\"object\" === typeof type)\n        switch (\n          (\"number\" === typeof type.tag &&\n            console.error(\n              \"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"\n            ),\n          type.$$typeof)\n        ) {\n          case REACT_PORTAL_TYPE:\n            return \"Portal\";\n          case REACT_CONTEXT_TYPE:\n            return type.displayName || \"Context\";\n          case REACT_CONSUMER_TYPE:\n            return (type._context.displayName || \"Context\") + \".Consumer\";\n          case REACT_FORWARD_REF_TYPE:\n            var innerType = type.render;\n            type = type.displayName;\n            type ||\n              ((type = innerType.displayName || innerType.name || \"\"),\n              (type = \"\" !== type ? \"ForwardRef(\" + type + \")\" : \"ForwardRef\"));\n            return type;\n          case REACT_MEMO_TYPE:\n            return (\n              (innerType = type.displayName || null),\n              null !== innerType\n                ? innerType\n                : getComponentNameFromType(type.type) || \"Memo\"\n            );\n          case REACT_LAZY_TYPE:\n            innerType = type._payload;\n            type = type._init;\n            try {\n              return getComponentNameFromType(type(innerType));\n            } catch (x) {}\n        }\n      return null;\n    }\n    function testStringCoercion(value) {\n      return \"\" + value;\n    }\n    function checkKeyStringCoercion(value) {\n      try {\n        testStringCoercion(value);\n        var JSCompiler_inline_result = !1;\n      } catch (e) {\n        JSCompiler_inline_result = !0;\n      }\n      if (JSCompiler_inline_result) {\n        JSCompiler_inline_result = console;\n        var JSCompiler_temp_const = JSCompiler_inline_result.error;\n        var JSCompiler_inline_result$jscomp$0 =\n          (\"function\" === typeof Symbol &&\n            Symbol.toStringTag &&\n            value[Symbol.toStringTag]) ||\n          value.constructor.name ||\n          \"Object\";\n        JSCompiler_temp_const.call(\n          JSCompiler_inline_result,\n          \"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.\",\n          JSCompiler_inline_result$jscomp$0\n        );\n        return testStringCoercion(value);\n      }\n    }\n    function getTaskName(type) {\n      if (type === REACT_FRAGMENT_TYPE) return \"<>\";\n      if (\n        \"object\" === typeof type &&\n        null !== type &&\n        type.$$typeof === REACT_LAZY_TYPE\n      )\n        return \"<...>\";\n      try {\n        var name = getComponentNameFromType(type);\n        return name ? \"<\" + name + \">\" : \"<...>\";\n      } catch (x) {\n        return \"<...>\";\n      }\n    }\n    function getOwner() {\n      var dispatcher = ReactSharedInternals.A;\n      return null === dispatcher ? null : dispatcher.getOwner();\n    }\n    function UnknownOwner() {\n      return Error(\"react-stack-top-frame\");\n    }\n    function hasValidKey(config) {\n      if (hasOwnProperty.call(config, \"key\")) {\n        var getter = Object.getOwnPropertyDescriptor(config, \"key\").get;\n        if (getter && getter.isReactWarning) return !1;\n      }\n      return void 0 !== config.key;\n    }\n    function defineKeyPropWarningGetter(props, displayName) {\n      function warnAboutAccessingKey() {\n        specialPropKeyWarningShown ||\n          ((specialPropKeyWarningShown = !0),\n          console.error(\n            \"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)\",\n            displayName\n          ));\n      }\n      warnAboutAccessingKey.isReactWarning = !0;\n      Object.defineProperty(props, \"key\", {\n        get: warnAboutAccessingKey,\n        configurable: !0\n      });\n    }\n    function elementRefGetterWithDeprecationWarning() {\n      var componentName = getComponentNameFromType(this.type);\n      didWarnAboutElementRef[componentName] ||\n        ((didWarnAboutElementRef[componentName] = !0),\n        console.error(\n          \"Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.\"\n        ));\n      componentName = this.props.ref;\n      return void 0 !== componentName ? componentName : null;\n    }\n    function ReactElement(type, key, props, owner, debugStack, debugTask) {\n      var refProp = props.ref;\n      type = {\n        $$typeof: REACT_ELEMENT_TYPE,\n        type: type,\n        key: key,\n        props: props,\n        _owner: owner\n      };\n      null !== (void 0 !== refProp ? refProp : null)\n        ? Object.defineProperty(type, \"ref\", {\n            enumerable: !1,\n            get: elementRefGetterWithDeprecationWarning\n          })\n        : Object.defineProperty(type, \"ref\", { enumerable: !1, value: null });\n      type._store = {};\n      Object.defineProperty(type._store, \"validated\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: 0\n      });\n      Object.defineProperty(type, \"_debugInfo\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: null\n      });\n      Object.defineProperty(type, \"_debugStack\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugStack\n      });\n      Object.defineProperty(type, \"_debugTask\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugTask\n      });\n      Object.freeze && (Object.freeze(type.props), Object.freeze(type));\n      return type;\n    }\n    function jsxDEVImpl(\n      type,\n      config,\n      maybeKey,\n      isStaticChildren,\n      debugStack,\n      debugTask\n    ) {\n      var children = config.children;\n      if (void 0 !== children)\n        if (isStaticChildren)\n          if (isArrayImpl(children)) {\n            for (\n              isStaticChildren = 0;\n              isStaticChildren < children.length;\n              isStaticChildren++\n            )\n              validateChildKeys(children[isStaticChildren]);\n            Object.freeze && Object.freeze(children);\n          } else\n            console.error(\n              \"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\"\n            );\n        else validateChildKeys(children);\n      if (hasOwnProperty.call(config, \"key\")) {\n        children = getComponentNameFromType(type);\n        var keys = Object.keys(config).filter(function (k) {\n          return \"key\" !== k;\n        });\n        isStaticChildren =\n          0 < keys.length\n            ? \"{key: someKey, \" + keys.join(\": ..., \") + \": ...}\"\n            : \"{key: someKey}\";\n        didWarnAboutKeySpread[children + isStaticChildren] ||\n          ((keys =\n            0 < keys.length ? \"{\" + keys.join(\": ..., \") + \": ...}\" : \"{}\"),\n          console.error(\n            'A props object containing a \"key\" prop is being spread into JSX:\\n  let props = %s;\\n  <%s {...props} />\\nReact keys must be passed directly to JSX without using spread:\\n  let props = %s;\\n  <%s key={someKey} {...props} />',\n            isStaticChildren,\n            children,\n            keys,\n            children\n          ),\n          (didWarnAboutKeySpread[children + isStaticChildren] = !0));\n      }\n      children = null;\n      void 0 !== maybeKey &&\n        (checkKeyStringCoercion(maybeKey), (children = \"\" + maybeKey));\n      hasValidKey(config) &&\n        (checkKeyStringCoercion(config.key), (children = \"\" + config.key));\n      if (\"key\" in config) {\n        maybeKey = {};\n        for (var propName in config)\n          \"key\" !== propName && (maybeKey[propName] = config[propName]);\n      } else maybeKey = config;\n      children &&\n        defineKeyPropWarningGetter(\n          maybeKey,\n          \"function\" === typeof type\n            ? type.displayName || type.name || \"Unknown\"\n            : type\n        );\n      return ReactElement(\n        type,\n        children,\n        maybeKey,\n        getOwner(),\n        debugStack,\n        debugTask\n      );\n    }\n    function validateChildKeys(node) {\n      \"object\" === typeof node &&\n        null !== node &&\n        node.$$typeof === REACT_ELEMENT_TYPE &&\n        node._store &&\n        (node._store.validated = 1);\n    }\n    var React = __webpack_require__(/*! next/dist/compiled/react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\"),\n      REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n      REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n      REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n      REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n      REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\"),\n      REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n      REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n      REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n      REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n      REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\"),\n      REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n      REACT_LAZY_TYPE = Symbol.for(\"react.lazy\"),\n      REACT_ACTIVITY_TYPE = Symbol.for(\"react.activity\"),\n      REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\"),\n      ReactSharedInternals =\n        React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n      hasOwnProperty = Object.prototype.hasOwnProperty,\n      isArrayImpl = Array.isArray,\n      createTask = console.createTask\n        ? console.createTask\n        : function () {\n            return null;\n          };\n    React = {\n      react_stack_bottom_frame: function (callStackForError) {\n        return callStackForError();\n      }\n    };\n    var specialPropKeyWarningShown;\n    var didWarnAboutElementRef = {};\n    var unknownOwnerDebugStack = React.react_stack_bottom_frame.bind(\n      React,\n      UnknownOwner\n    )();\n    var unknownOwnerDebugTask = createTask(getTaskName(UnknownOwner));\n    var didWarnAboutKeySpread = {};\n    exports.Fragment = REACT_FRAGMENT_TYPE;\n    exports.jsxDEV = function (type, config, maybeKey, isStaticChildren) {\n      var trackActualOwner =\n        1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;\n      return jsxDEVImpl(\n        type,\n        config,\n        maybeKey,\n        isStaticChildren,\n        trackActualOwner\n          ? Error(\"react-stack-top-frame\")\n          : unknownOwnerDebugStack,\n        trackActualOwner ? createTask(getTaskName(type)) : unknownOwnerDebugTask\n      );\n    };\n  })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcmVhY3QvY2pzL3JlYWN0LWpzeC1kZXYtcnVudGltZS5kZXZlbG9wbWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWE7QUFDYixLQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCwrQ0FBK0MsNkJBQTZCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxnQkFBZ0IsZ0RBQWdEO0FBQ2hFLGdCQUFnQixhQUFhO0FBQzdCO0FBQ0E7QUFDQSxnQ0FBZ0Msa0NBQWtDLE9BQU87QUFDekU7QUFDQSxnR0FBZ0csU0FBUyxVQUFVLHNGQUFzRixhQUFhLFVBQVUsVUFBVTtBQUMxTztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG1CQUFPLENBQUMsc0dBQTBCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksZ0JBQWdCO0FBQ3BCLElBQUksY0FBYztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUciLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcWWltaW5nIFN1XFxEZXNrdG9wXFxyZXBvc1xccm9tYW4tc3RvcnlcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXG5leHRcXGRpc3RcXGNvbXBpbGVkXFxyZWFjdFxcY2pzXFxyZWFjdC1qc3gtZGV2LXJ1bnRpbWUuZGV2ZWxvcG1lbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZSBSZWFjdFxuICogcmVhY3QtanN4LWRldi1ydW50aW1lLmRldmVsb3BtZW50LmpzXG4gKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5cInVzZSBzdHJpY3RcIjtcblwicHJvZHVjdGlvblwiICE9PSBwcm9jZXNzLmVudi5OT0RFX0VOViAmJlxuICAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlKSB7XG4gICAgICBpZiAobnVsbCA9PSB0eXBlKSByZXR1cm4gbnVsbDtcbiAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiB0eXBlKVxuICAgICAgICByZXR1cm4gdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfQ0xJRU5UX1JFRkVSRU5DRVxuICAgICAgICAgID8gbnVsbFxuICAgICAgICAgIDogdHlwZS5kaXNwbGF5TmFtZSB8fCB0eXBlLm5hbWUgfHwgbnVsbDtcbiAgICAgIGlmIChcInN0cmluZ1wiID09PSB0eXBlb2YgdHlwZSkgcmV0dXJuIHR5cGU7XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBSRUFDVF9GUkFHTUVOVF9UWVBFOlxuICAgICAgICAgIHJldHVybiBcIkZyYWdtZW50XCI7XG4gICAgICAgIGNhc2UgUkVBQ1RfUFJPRklMRVJfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJQcm9maWxlclwiO1xuICAgICAgICBjYXNlIFJFQUNUX1NUUklDVF9NT0RFX1RZUEU6XG4gICAgICAgICAgcmV0dXJuIFwiU3RyaWN0TW9kZVwiO1xuICAgICAgICBjYXNlIFJFQUNUX1NVU1BFTlNFX1RZUEU6XG4gICAgICAgICAgcmV0dXJuIFwiU3VzcGVuc2VcIjtcbiAgICAgICAgY2FzZSBSRUFDVF9TVVNQRU5TRV9MSVNUX1RZUEU6XG4gICAgICAgICAgcmV0dXJuIFwiU3VzcGVuc2VMaXN0XCI7XG4gICAgICAgIGNhc2UgUkVBQ1RfQUNUSVZJVFlfVFlQRTpcbiAgICAgICAgICByZXR1cm4gXCJBY3Rpdml0eVwiO1xuICAgICAgfVxuICAgICAgaWYgKFwib2JqZWN0XCIgPT09IHR5cGVvZiB0eXBlKVxuICAgICAgICBzd2l0Y2ggKFxuICAgICAgICAgIChcIm51bWJlclwiID09PSB0eXBlb2YgdHlwZS50YWcgJiZcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgIFwiUmVjZWl2ZWQgYW4gdW5leHBlY3RlZCBvYmplY3QgaW4gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKCkuIFRoaXMgaXMgbGlrZWx5IGEgYnVnIGluIFJlYWN0LiBQbGVhc2UgZmlsZSBhbiBpc3N1ZS5cIlxuICAgICAgICAgICAgKSxcbiAgICAgICAgICB0eXBlLiQkdHlwZW9mKVxuICAgICAgICApIHtcbiAgICAgICAgICBjYXNlIFJFQUNUX1BPUlRBTF9UWVBFOlxuICAgICAgICAgICAgcmV0dXJuIFwiUG9ydGFsXCI7XG4gICAgICAgICAgY2FzZSBSRUFDVF9DT05URVhUX1RZUEU6XG4gICAgICAgICAgICByZXR1cm4gdHlwZS5kaXNwbGF5TmFtZSB8fCBcIkNvbnRleHRcIjtcbiAgICAgICAgICBjYXNlIFJFQUNUX0NPTlNVTUVSX1RZUEU6XG4gICAgICAgICAgICByZXR1cm4gKHR5cGUuX2NvbnRleHQuZGlzcGxheU5hbWUgfHwgXCJDb250ZXh0XCIpICsgXCIuQ29uc3VtZXJcIjtcbiAgICAgICAgICBjYXNlIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEU6XG4gICAgICAgICAgICB2YXIgaW5uZXJUeXBlID0gdHlwZS5yZW5kZXI7XG4gICAgICAgICAgICB0eXBlID0gdHlwZS5kaXNwbGF5TmFtZTtcbiAgICAgICAgICAgIHR5cGUgfHxcbiAgICAgICAgICAgICAgKCh0eXBlID0gaW5uZXJUeXBlLmRpc3BsYXlOYW1lIHx8IGlubmVyVHlwZS5uYW1lIHx8IFwiXCIpLFxuICAgICAgICAgICAgICAodHlwZSA9IFwiXCIgIT09IHR5cGUgPyBcIkZvcndhcmRSZWYoXCIgKyB0eXBlICsgXCIpXCIgOiBcIkZvcndhcmRSZWZcIikpO1xuICAgICAgICAgICAgcmV0dXJuIHR5cGU7XG4gICAgICAgICAgY2FzZSBSRUFDVF9NRU1PX1RZUEU6XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAoaW5uZXJUeXBlID0gdHlwZS5kaXNwbGF5TmFtZSB8fCBudWxsKSxcbiAgICAgICAgICAgICAgbnVsbCAhPT0gaW5uZXJUeXBlXG4gICAgICAgICAgICAgICAgPyBpbm5lclR5cGVcbiAgICAgICAgICAgICAgICA6IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlLnR5cGUpIHx8IFwiTWVtb1wiXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGNhc2UgUkVBQ1RfTEFaWV9UWVBFOlxuICAgICAgICAgICAgaW5uZXJUeXBlID0gdHlwZS5fcGF5bG9hZDtcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlLl9pbml0O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgcmV0dXJuIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlKGlubmVyVHlwZSkpO1xuICAgICAgICAgICAgfSBjYXRjaCAoeCkge31cbiAgICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRlc3RTdHJpbmdDb2VyY2lvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIFwiXCIgKyB2YWx1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2hlY2tLZXlTdHJpbmdDb2VyY2lvbih2YWx1ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKTtcbiAgICAgICAgdmFyIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9ICExO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSAhMDtcbiAgICAgIH1cbiAgICAgIGlmIChKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQpIHtcbiAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0ID0gY29uc29sZTtcbiAgICAgICAgdmFyIEpTQ29tcGlsZXJfdGVtcF9jb25zdCA9IEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdC5lcnJvcjtcbiAgICAgICAgdmFyIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCRqc2NvbXAkMCA9XG4gICAgICAgICAgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIFN5bWJvbCAmJlxuICAgICAgICAgICAgU3ltYm9sLnRvU3RyaW5nVGFnICYmXG4gICAgICAgICAgICB2YWx1ZVtTeW1ib2wudG9TdHJpbmdUYWddKSB8fFxuICAgICAgICAgIHZhbHVlLmNvbnN0cnVjdG9yLm5hbWUgfHxcbiAgICAgICAgICBcIk9iamVjdFwiO1xuICAgICAgICBKU0NvbXBpbGVyX3RlbXBfY29uc3QuY2FsbChcbiAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQsXG4gICAgICAgICAgXCJUaGUgcHJvdmlkZWQga2V5IGlzIGFuIHVuc3VwcG9ydGVkIHR5cGUgJXMuIFRoaXMgdmFsdWUgbXVzdCBiZSBjb2VyY2VkIHRvIGEgc3RyaW5nIGJlZm9yZSB1c2luZyBpdCBoZXJlLlwiLFxuICAgICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCRqc2NvbXAkMFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0VGFza05hbWUodHlwZSkge1xuICAgICAgaWYgKHR5cGUgPT09IFJFQUNUX0ZSQUdNRU5UX1RZUEUpIHJldHVybiBcIjw+XCI7XG4gICAgICBpZiAoXG4gICAgICAgIFwib2JqZWN0XCIgPT09IHR5cGVvZiB0eXBlICYmXG4gICAgICAgIG51bGwgIT09IHR5cGUgJiZcbiAgICAgICAgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfTEFaWV9UWVBFXG4gICAgICApXG4gICAgICAgIHJldHVybiBcIjwuLi4+XCI7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgbmFtZSA9IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlKTtcbiAgICAgICAgcmV0dXJuIG5hbWUgPyBcIjxcIiArIG5hbWUgKyBcIj5cIiA6IFwiPC4uLj5cIjtcbiAgICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgICAgcmV0dXJuIFwiPC4uLj5cIjtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0T3duZXIoKSB7XG4gICAgICB2YXIgZGlzcGF0Y2hlciA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLkE7XG4gICAgICByZXR1cm4gbnVsbCA9PT0gZGlzcGF0Y2hlciA/IG51bGwgOiBkaXNwYXRjaGVyLmdldE93bmVyKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFVua25vd25Pd25lcigpIHtcbiAgICAgIHJldHVybiBFcnJvcihcInJlYWN0LXN0YWNrLXRvcC1mcmFtZVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFzVmFsaWRLZXkoY29uZmlnKSB7XG4gICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChjb25maWcsIFwia2V5XCIpKSB7XG4gICAgICAgIHZhciBnZXR0ZXIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGNvbmZpZywgXCJrZXlcIikuZ2V0O1xuICAgICAgICBpZiAoZ2V0dGVyICYmIGdldHRlci5pc1JlYWN0V2FybmluZykgcmV0dXJuICExO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gY29uZmlnLmtleTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZGVmaW5lS2V5UHJvcFdhcm5pbmdHZXR0ZXIocHJvcHMsIGRpc3BsYXlOYW1lKSB7XG4gICAgICBmdW5jdGlvbiB3YXJuQWJvdXRBY2Nlc3NpbmdLZXkoKSB7XG4gICAgICAgIHNwZWNpYWxQcm9wS2V5V2FybmluZ1Nob3duIHx8XG4gICAgICAgICAgKChzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93biA9ICEwKSxcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgXCIlczogYGtleWAgaXMgbm90IGEgcHJvcC4gVHJ5aW5nIHRvIGFjY2VzcyBpdCB3aWxsIHJlc3VsdCBpbiBgdW5kZWZpbmVkYCBiZWluZyByZXR1cm5lZC4gSWYgeW91IG5lZWQgdG8gYWNjZXNzIHRoZSBzYW1lIHZhbHVlIHdpdGhpbiB0aGUgY2hpbGQgY29tcG9uZW50LCB5b3Ugc2hvdWxkIHBhc3MgaXQgYXMgYSBkaWZmZXJlbnQgcHJvcC4gKGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvc3BlY2lhbC1wcm9wcylcIixcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lXG4gICAgICAgICAgKSk7XG4gICAgICB9XG4gICAgICB3YXJuQWJvdXRBY2Nlc3NpbmdLZXkuaXNSZWFjdFdhcm5pbmcgPSAhMDtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm9wcywgXCJrZXlcIiwge1xuICAgICAgICBnZXQ6IHdhcm5BYm91dEFjY2Vzc2luZ0tleSxcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMFxuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVsZW1lbnRSZWZHZXR0ZXJXaXRoRGVwcmVjYXRpb25XYXJuaW5nKCkge1xuICAgICAgdmFyIGNvbXBvbmVudE5hbWUgPSBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodGhpcy50eXBlKTtcbiAgICAgIGRpZFdhcm5BYm91dEVsZW1lbnRSZWZbY29tcG9uZW50TmFtZV0gfHxcbiAgICAgICAgKChkaWRXYXJuQWJvdXRFbGVtZW50UmVmW2NvbXBvbmVudE5hbWVdID0gITApLFxuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIFwiQWNjZXNzaW5nIGVsZW1lbnQucmVmIHdhcyByZW1vdmVkIGluIFJlYWN0IDE5LiByZWYgaXMgbm93IGEgcmVndWxhciBwcm9wLiBJdCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgSlNYIEVsZW1lbnQgdHlwZSBpbiBhIGZ1dHVyZSByZWxlYXNlLlwiXG4gICAgICAgICkpO1xuICAgICAgY29tcG9uZW50TmFtZSA9IHRoaXMucHJvcHMucmVmO1xuICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gY29tcG9uZW50TmFtZSA/IGNvbXBvbmVudE5hbWUgOiBudWxsO1xuICAgIH1cbiAgICBmdW5jdGlvbiBSZWFjdEVsZW1lbnQodHlwZSwga2V5LCBwcm9wcywgb3duZXIsIGRlYnVnU3RhY2ssIGRlYnVnVGFzaykge1xuICAgICAgdmFyIHJlZlByb3AgPSBwcm9wcy5yZWY7XG4gICAgICB0eXBlID0ge1xuICAgICAgICAkJHR5cGVvZjogUkVBQ1RfRUxFTUVOVF9UWVBFLFxuICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgcHJvcHM6IHByb3BzLFxuICAgICAgICBfb3duZXI6IG93bmVyXG4gICAgICB9O1xuICAgICAgbnVsbCAhPT0gKHZvaWQgMCAhPT0gcmVmUHJvcCA/IHJlZlByb3AgOiBudWxsKVxuICAgICAgICA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcInJlZlwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICAgICAgICAgIGdldDogZWxlbWVudFJlZkdldHRlcldpdGhEZXByZWNhdGlvbldhcm5pbmdcbiAgICAgICAgICB9KVxuICAgICAgICA6IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcInJlZlwiLCB7IGVudW1lcmFibGU6ICExLCB2YWx1ZTogbnVsbCB9KTtcbiAgICAgIHR5cGUuX3N0b3JlID0ge307XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZS5fc3RvcmUsIFwidmFsaWRhdGVkXCIsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMSxcbiAgICAgICAgZW51bWVyYWJsZTogITEsXG4gICAgICAgIHdyaXRhYmxlOiAhMCxcbiAgICAgICAgdmFsdWU6IDBcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsIFwiX2RlYnVnSW5mb1wiLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITEsXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICB3cml0YWJsZTogITAsXG4gICAgICAgIHZhbHVlOiBudWxsXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBcIl9kZWJ1Z1N0YWNrXCIsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMSxcbiAgICAgICAgZW51bWVyYWJsZTogITEsXG4gICAgICAgIHdyaXRhYmxlOiAhMCxcbiAgICAgICAgdmFsdWU6IGRlYnVnU3RhY2tcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsIFwiX2RlYnVnVGFza1wiLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITEsXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICB3cml0YWJsZTogITAsXG4gICAgICAgIHZhbHVlOiBkZWJ1Z1Rhc2tcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmZyZWV6ZSAmJiAoT2JqZWN0LmZyZWV6ZSh0eXBlLnByb3BzKSwgT2JqZWN0LmZyZWV6ZSh0eXBlKSk7XG4gICAgICByZXR1cm4gdHlwZTtcbiAgICB9XG4gICAgZnVuY3Rpb24ganN4REVWSW1wbChcbiAgICAgIHR5cGUsXG4gICAgICBjb25maWcsXG4gICAgICBtYXliZUtleSxcbiAgICAgIGlzU3RhdGljQ2hpbGRyZW4sXG4gICAgICBkZWJ1Z1N0YWNrLFxuICAgICAgZGVidWdUYXNrXG4gICAgKSB7XG4gICAgICB2YXIgY2hpbGRyZW4gPSBjb25maWcuY2hpbGRyZW47XG4gICAgICBpZiAodm9pZCAwICE9PSBjaGlsZHJlbilcbiAgICAgICAgaWYgKGlzU3RhdGljQ2hpbGRyZW4pXG4gICAgICAgICAgaWYgKGlzQXJyYXlJbXBsKGNoaWxkcmVuKSkge1xuICAgICAgICAgICAgZm9yIChcbiAgICAgICAgICAgICAgaXNTdGF0aWNDaGlsZHJlbiA9IDA7XG4gICAgICAgICAgICAgIGlzU3RhdGljQ2hpbGRyZW4gPCBjaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICAgIGlzU3RhdGljQ2hpbGRyZW4rK1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB2YWxpZGF0ZUNoaWxkS2V5cyhjaGlsZHJlbltpc1N0YXRpY0NoaWxkcmVuXSk7XG4gICAgICAgICAgICBPYmplY3QuZnJlZXplICYmIE9iamVjdC5mcmVlemUoY2hpbGRyZW4pO1xuICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgXCJSZWFjdC5qc3g6IFN0YXRpYyBjaGlsZHJlbiBzaG91bGQgYWx3YXlzIGJlIGFuIGFycmF5LiBZb3UgYXJlIGxpa2VseSBleHBsaWNpdGx5IGNhbGxpbmcgUmVhY3QuanN4cyBvciBSZWFjdC5qc3hERVYuIFVzZSB0aGUgQmFiZWwgdHJhbnNmb3JtIGluc3RlYWQuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIGVsc2UgdmFsaWRhdGVDaGlsZEtleXMoY2hpbGRyZW4pO1xuICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoY29uZmlnLCBcImtleVwiKSkge1xuICAgICAgICBjaGlsZHJlbiA9IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlKTtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhjb25maWcpLmZpbHRlcihmdW5jdGlvbiAoaykge1xuICAgICAgICAgIHJldHVybiBcImtleVwiICE9PSBrO1xuICAgICAgICB9KTtcbiAgICAgICAgaXNTdGF0aWNDaGlsZHJlbiA9XG4gICAgICAgICAgMCA8IGtleXMubGVuZ3RoXG4gICAgICAgICAgICA/IFwie2tleTogc29tZUtleSwgXCIgKyBrZXlzLmpvaW4oXCI6IC4uLiwgXCIpICsgXCI6IC4uLn1cIlxuICAgICAgICAgICAgOiBcIntrZXk6IHNvbWVLZXl9XCI7XG4gICAgICAgIGRpZFdhcm5BYm91dEtleVNwcmVhZFtjaGlsZHJlbiArIGlzU3RhdGljQ2hpbGRyZW5dIHx8XG4gICAgICAgICAgKChrZXlzID1cbiAgICAgICAgICAgIDAgPCBrZXlzLmxlbmd0aCA/IFwie1wiICsga2V5cy5qb2luKFwiOiAuLi4sIFwiKSArIFwiOiAuLi59XCIgOiBcInt9XCIpLFxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAnQSBwcm9wcyBvYmplY3QgY29udGFpbmluZyBhIFwia2V5XCIgcHJvcCBpcyBiZWluZyBzcHJlYWQgaW50byBKU1g6XFxuICBsZXQgcHJvcHMgPSAlcztcXG4gIDwlcyB7Li4ucHJvcHN9IC8+XFxuUmVhY3Qga2V5cyBtdXN0IGJlIHBhc3NlZCBkaXJlY3RseSB0byBKU1ggd2l0aG91dCB1c2luZyBzcHJlYWQ6XFxuICBsZXQgcHJvcHMgPSAlcztcXG4gIDwlcyBrZXk9e3NvbWVLZXl9IHsuLi5wcm9wc30gLz4nLFxuICAgICAgICAgICAgaXNTdGF0aWNDaGlsZHJlbixcbiAgICAgICAgICAgIGNoaWxkcmVuLFxuICAgICAgICAgICAga2V5cyxcbiAgICAgICAgICAgIGNoaWxkcmVuXG4gICAgICAgICAgKSxcbiAgICAgICAgICAoZGlkV2FybkFib3V0S2V5U3ByZWFkW2NoaWxkcmVuICsgaXNTdGF0aWNDaGlsZHJlbl0gPSAhMCkpO1xuICAgICAgfVxuICAgICAgY2hpbGRyZW4gPSBudWxsO1xuICAgICAgdm9pZCAwICE9PSBtYXliZUtleSAmJlxuICAgICAgICAoY2hlY2tLZXlTdHJpbmdDb2VyY2lvbihtYXliZUtleSksIChjaGlsZHJlbiA9IFwiXCIgKyBtYXliZUtleSkpO1xuICAgICAgaGFzVmFsaWRLZXkoY29uZmlnKSAmJlxuICAgICAgICAoY2hlY2tLZXlTdHJpbmdDb2VyY2lvbihjb25maWcua2V5KSwgKGNoaWxkcmVuID0gXCJcIiArIGNvbmZpZy5rZXkpKTtcbiAgICAgIGlmIChcImtleVwiIGluIGNvbmZpZykge1xuICAgICAgICBtYXliZUtleSA9IHt9O1xuICAgICAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBjb25maWcpXG4gICAgICAgICAgXCJrZXlcIiAhPT0gcHJvcE5hbWUgJiYgKG1heWJlS2V5W3Byb3BOYW1lXSA9IGNvbmZpZ1twcm9wTmFtZV0pO1xuICAgICAgfSBlbHNlIG1heWJlS2V5ID0gY29uZmlnO1xuICAgICAgY2hpbGRyZW4gJiZcbiAgICAgICAgZGVmaW5lS2V5UHJvcFdhcm5pbmdHZXR0ZXIoXG4gICAgICAgICAgbWF5YmVLZXksXG4gICAgICAgICAgXCJmdW5jdGlvblwiID09PSB0eXBlb2YgdHlwZVxuICAgICAgICAgICAgPyB0eXBlLmRpc3BsYXlOYW1lIHx8IHR5cGUubmFtZSB8fCBcIlVua25vd25cIlxuICAgICAgICAgICAgOiB0eXBlXG4gICAgICAgICk7XG4gICAgICByZXR1cm4gUmVhY3RFbGVtZW50KFxuICAgICAgICB0eXBlLFxuICAgICAgICBjaGlsZHJlbixcbiAgICAgICAgbWF5YmVLZXksXG4gICAgICAgIGdldE93bmVyKCksXG4gICAgICAgIGRlYnVnU3RhY2ssXG4gICAgICAgIGRlYnVnVGFza1xuICAgICAgKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdmFsaWRhdGVDaGlsZEtleXMobm9kZSkge1xuICAgICAgXCJvYmplY3RcIiA9PT0gdHlwZW9mIG5vZGUgJiZcbiAgICAgICAgbnVsbCAhPT0gbm9kZSAmJlxuICAgICAgICBub2RlLiQkdHlwZW9mID09PSBSRUFDVF9FTEVNRU5UX1RZUEUgJiZcbiAgICAgICAgbm9kZS5fc3RvcmUgJiZcbiAgICAgICAgKG5vZGUuX3N0b3JlLnZhbGlkYXRlZCA9IDEpO1xuICAgIH1cbiAgICB2YXIgUmVhY3QgPSByZXF1aXJlKFwibmV4dC9kaXN0L2NvbXBpbGVkL3JlYWN0XCIpLFxuICAgICAgUkVBQ1RfRUxFTUVOVF9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnRyYW5zaXRpb25hbC5lbGVtZW50XCIpLFxuICAgICAgUkVBQ1RfUE9SVEFMX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3QucG9ydGFsXCIpLFxuICAgICAgUkVBQ1RfRlJBR01FTlRfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5mcmFnbWVudFwiKSxcbiAgICAgIFJFQUNUX1NUUklDVF9NT0RFX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3Quc3RyaWN0X21vZGVcIiksXG4gICAgICBSRUFDVF9QUk9GSUxFUl9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LnByb2ZpbGVyXCIpLFxuICAgICAgUkVBQ1RfQ09OU1VNRVJfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5jb25zdW1lclwiKSxcbiAgICAgIFJFQUNUX0NPTlRFWFRfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5jb250ZXh0XCIpLFxuICAgICAgUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5mb3J3YXJkX3JlZlwiKSxcbiAgICAgIFJFQUNUX1NVU1BFTlNFX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3Quc3VzcGVuc2VcIiksXG4gICAgICBSRUFDVF9TVVNQRU5TRV9MSVNUX1RZUEUgPSBTeW1ib2wuZm9yKFwicmVhY3Quc3VzcGVuc2VfbGlzdFwiKSxcbiAgICAgIFJFQUNUX01FTU9fVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5tZW1vXCIpLFxuICAgICAgUkVBQ1RfTEFaWV9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LmxhenlcIiksXG4gICAgICBSRUFDVF9BQ1RJVklUWV9UWVBFID0gU3ltYm9sLmZvcihcInJlYWN0LmFjdGl2aXR5XCIpLFxuICAgICAgUkVBQ1RfQ0xJRU5UX1JFRkVSRU5DRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5jbGllbnQucmVmZXJlbmNlXCIpLFxuICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMgPVxuICAgICAgICBSZWFjdC5fX0NMSUVOVF9JTlRFUk5BTFNfRE9fTk9UX1VTRV9PUl9XQVJOX1VTRVJTX1RIRVlfQ0FOTk9UX1VQR1JBREUsXG4gICAgICBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksXG4gICAgICBpc0FycmF5SW1wbCA9IEFycmF5LmlzQXJyYXksXG4gICAgICBjcmVhdGVUYXNrID0gY29uc29sZS5jcmVhdGVUYXNrXG4gICAgICAgID8gY29uc29sZS5jcmVhdGVUYXNrXG4gICAgICAgIDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfTtcbiAgICBSZWFjdCA9IHtcbiAgICAgIHJlYWN0X3N0YWNrX2JvdHRvbV9mcmFtZTogZnVuY3Rpb24gKGNhbGxTdGFja0ZvckVycm9yKSB7XG4gICAgICAgIHJldHVybiBjYWxsU3RhY2tGb3JFcnJvcigpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHNwZWNpYWxQcm9wS2V5V2FybmluZ1Nob3duO1xuICAgIHZhciBkaWRXYXJuQWJvdXRFbGVtZW50UmVmID0ge307XG4gICAgdmFyIHVua25vd25Pd25lckRlYnVnU3RhY2sgPSBSZWFjdC5yZWFjdF9zdGFja19ib3R0b21fZnJhbWUuYmluZChcbiAgICAgIFJlYWN0LFxuICAgICAgVW5rbm93bk93bmVyXG4gICAgKSgpO1xuICAgIHZhciB1bmtub3duT3duZXJEZWJ1Z1Rhc2sgPSBjcmVhdGVUYXNrKGdldFRhc2tOYW1lKFVua25vd25Pd25lcikpO1xuICAgIHZhciBkaWRXYXJuQWJvdXRLZXlTcHJlYWQgPSB7fTtcbiAgICBleHBvcnRzLkZyYWdtZW50ID0gUkVBQ1RfRlJBR01FTlRfVFlQRTtcbiAgICBleHBvcnRzLmpzeERFViA9IGZ1bmN0aW9uICh0eXBlLCBjb25maWcsIG1heWJlS2V5LCBpc1N0YXRpY0NoaWxkcmVuKSB7XG4gICAgICB2YXIgdHJhY2tBY3R1YWxPd25lciA9XG4gICAgICAgIDFlNCA+IFJlYWN0U2hhcmVkSW50ZXJuYWxzLnJlY2VudGx5Q3JlYXRlZE93bmVyU3RhY2tzKys7XG4gICAgICByZXR1cm4ganN4REVWSW1wbChcbiAgICAgICAgdHlwZSxcbiAgICAgICAgY29uZmlnLFxuICAgICAgICBtYXliZUtleSxcbiAgICAgICAgaXNTdGF0aWNDaGlsZHJlbixcbiAgICAgICAgdHJhY2tBY3R1YWxPd25lclxuICAgICAgICAgID8gRXJyb3IoXCJyZWFjdC1zdGFjay10b3AtZnJhbWVcIilcbiAgICAgICAgICA6IHVua25vd25Pd25lckRlYnVnU3RhY2ssXG4gICAgICAgIHRyYWNrQWN0dWFsT3duZXIgPyBjcmVhdGVUYXNrKGdldFRhc2tOYW1lKHR5cGUpKSA6IHVua25vd25Pd25lckRlYnVnVGFza1xuICAgICAgKTtcbiAgICB9O1xuICB9KSgpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js":
/*!******************************************************************!*\
  !*** ./node_modules/next/dist/compiled/react/jsx-dev-runtime.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\n\nif (false) {} else {\n  module.exports = __webpack_require__(/*! ./cjs/react-jsx-dev-runtime.development.js */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcmVhY3QvanN4LWRldi1ydW50aW1lLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLElBQUksS0FBcUMsRUFBRSxFQUUxQyxDQUFDO0FBQ0YsRUFBRSw4TEFBc0U7QUFDeEUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcWWltaW5nIFN1XFxEZXNrdG9wXFxyZXBvc1xccm9tYW4tc3RvcnlcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXG5leHRcXGRpc3RcXGNvbXBpbGVkXFxyZWFjdFxcanN4LWRldi1ydW50aW1lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Nqcy9yZWFjdC1qc3gtZGV2LXJ1bnRpbWUucHJvZHVjdGlvbi5qcycpO1xufSBlbHNlIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Nqcy9yZWFjdC1qc3gtZGV2LXJ1bnRpbWUuZGV2ZWxvcG1lbnQuanMnKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/app/rome/page.tsx":
/*!*******************************!*\
  !*** ./src/app/rome/page.tsx ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RomePage)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_MapCanvas__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @components/MapCanvas */ \"(app-pages-browser)/./src/components/MapCanvas.tsx\");\n/* harmony import */ var _components_YearSlider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @components/YearSlider */ \"(app-pages-browser)/./src/components/YearSlider.tsx\");\n/* harmony import */ var _components_CountryInfo__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @components/CountryInfo */ \"(app-pages-browser)/./src/components/CountryInfo.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\nfunction RomePage() {\n    _s();\n    const [year, setYear] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(2);\n    const [selectedTag, setSelectedTag] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"relative w-screen h-screen overflow-hidden bg-black\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_YearSlider__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                onChange: setYear,\n                initialValue: 2,\n                min: 2,\n                max: 1453\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\app\\\\rome\\\\page.tsx\",\n                lineNumber: 14,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_CountryInfo__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                selectedTag: selectedTag,\n                year: year,\n                onTagChange: setSelectedTag\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\app\\\\rome\\\\page.tsx\",\n                lineNumber: 15,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_MapCanvas__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                year: year,\n                onProvinceSelect: setSelectedTag\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\app\\\\rome\\\\page.tsx\",\n                lineNumber: 16,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\app\\\\rome\\\\page.tsx\",\n        lineNumber: 13,\n        columnNumber: 5\n    }, this);\n}\n_s(RomePage, \"W862gkcN7S+d0iMpxJIEpNhrAiM=\");\n_c = RomePage;\nvar _c;\n$RefreshReg$(_c, \"RomePage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvcm9tZS9wYWdlLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFFZ0M7QUFDYTtBQUNFO0FBQ0U7QUFFbEMsU0FBU0k7O0lBQ3RCLE1BQU0sQ0FBQ0MsTUFBTUMsUUFBUSxHQUFHTiwrQ0FBUUEsQ0FBQztJQUNqQyxNQUFNLENBQUNPLGFBQWFDLGVBQWUsR0FBR1IsK0NBQVFBLENBQWdCO0lBRTlELHFCQUNFLDhEQUFDUztRQUFJQyxXQUFVOzswQkFDYiw4REFBQ1IsOERBQVVBO2dCQUFDUyxVQUFVTDtnQkFBU00sY0FBYztnQkFBR0MsS0FBSztnQkFBR0MsS0FBSzs7Ozs7OzBCQUM3RCw4REFBQ1gsK0RBQVdBO2dCQUFDSSxhQUFhQTtnQkFBYUYsTUFBTUE7Z0JBQU1VLGFBQWFQOzs7Ozs7MEJBQ2hFLDhEQUFDUCw2REFBU0E7Z0JBQUNJLE1BQU1BO2dCQUFNVyxrQkFBa0JSOzs7Ozs7Ozs7Ozs7QUFHL0M7R0FYd0JKO0tBQUFBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFlpbWluZyBTdVxcRGVza3RvcFxccmVwb3NcXHJvbWFuLXN0b3J5XFxmcm9udGVuZFxcc3JjXFxhcHBcXHJvbWVcXHBhZ2UudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xyXG5cclxuaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IE1hcENhbnZhcyBmcm9tICdAY29tcG9uZW50cy9NYXBDYW52YXMnXHJcbmltcG9ydCBZZWFyU2xpZGVyIGZyb20gJ0Bjb21wb25lbnRzL1llYXJTbGlkZXInXHJcbmltcG9ydCBDb3VudHJ5SW5mbyBmcm9tICdAY29tcG9uZW50cy9Db3VudHJ5SW5mbydcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJvbWVQYWdlKCkge1xyXG4gIGNvbnN0IFt5ZWFyLCBzZXRZZWFyXSA9IHVzZVN0YXRlKDIpXHJcbiAgY29uc3QgW3NlbGVjdGVkVGFnLCBzZXRTZWxlY3RlZFRhZ10gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSB3LXNjcmVlbiBoLXNjcmVlbiBvdmVyZmxvdy1oaWRkZW4gYmctYmxhY2tcIj5cclxuICAgICAgPFllYXJTbGlkZXIgb25DaGFuZ2U9e3NldFllYXJ9IGluaXRpYWxWYWx1ZT17Mn0gbWluPXsyfSBtYXg9ezE0NTN9IC8+XHJcbiAgICAgIDxDb3VudHJ5SW5mbyBzZWxlY3RlZFRhZz17c2VsZWN0ZWRUYWd9IHllYXI9e3llYXJ9IG9uVGFnQ2hhbmdlPXtzZXRTZWxlY3RlZFRhZ30gLz5cclxuICAgICAgPE1hcENhbnZhcyB5ZWFyPXt5ZWFyfSBvblByb3ZpbmNlU2VsZWN0PXtzZXRTZWxlY3RlZFRhZ30gLz5cclxuICAgIDwvZGl2PlxyXG4gIClcclxufVxyXG4iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJNYXBDYW52YXMiLCJZZWFyU2xpZGVyIiwiQ291bnRyeUluZm8iLCJSb21lUGFnZSIsInllYXIiLCJzZXRZZWFyIiwic2VsZWN0ZWRUYWciLCJzZXRTZWxlY3RlZFRhZyIsImRpdiIsImNsYXNzTmFtZSIsIm9uQ2hhbmdlIiwiaW5pdGlhbFZhbHVlIiwibWluIiwibWF4Iiwib25UYWdDaGFuZ2UiLCJvblByb3ZpbmNlU2VsZWN0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/rome/page.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/components/CountryInfo.tsx":
/*!****************************************!*\
  !*** ./src/components/CountryInfo.tsx ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CountryInfo)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\nfunction CountryInfo(param) {\n    let { selectedTag, year, onTagChange } = param;\n    var _metadata_tags_displayTag;\n    _s();\n    const [rulerFiles, setRulerFiles] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [metadata, setMetadata] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // Initialization, gets list of all rulers\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CountryInfo.useEffect\": ()=>{\n            async function fetchRulerFiles() {\n                const loadedMetadata = await fetch('/provinces-metadata.json').then({\n                    \"CountryInfo.useEffect.fetchRulerFiles\": (res)=>res.json()\n                }[\"CountryInfo.useEffect.fetchRulerFiles\"]);\n                const rulerData = {};\n                if (loadedMetadata.tags) {\n                    const tagNames = Object.keys(loadedMetadata.tags);\n                    const historyPromises = tagNames.map({\n                        \"CountryInfo.useEffect.fetchRulerFiles.historyPromises\": async (tag)=>{\n                            try {\n                                const res = await fetch(\"/history/rulers/\".concat(tag, \".json\"));\n                                if (res.ok) {\n                                    const data = await res.json();\n                                    return {\n                                        tag,\n                                        data\n                                    };\n                                }\n                            } catch (e) {\n                                console.log(\"No ruler file for \".concat(tag));\n                            }\n                            return null;\n                        }\n                    }[\"CountryInfo.useEffect.fetchRulerFiles.historyPromises\"]);\n                    const results = await Promise.all(historyPromises);\n                    for (const result of results){\n                        if (result) {\n                            rulerData[result.tag] = result.data;\n                        }\n                    }\n                }\n                console.log('Loaded ruler files:', Object.keys(rulerData));\n                setRulerFiles(rulerData);\n                setMetadata(loadedMetadata);\n            }\n            fetchRulerFiles();\n        }\n    }[\"CountryInfo.useEffect\"], []);\n    // Auto-select ROM when selectedTag is null and data is loaded\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CountryInfo.useEffect\": ()=>{\n            if (!selectedTag && Object.keys(rulerFiles).length > 0 && rulerFiles['ROM']) {\n                console.log('Auto-selecting ROM');\n                onTagChange('ROM');\n            }\n        }\n    }[\"CountryInfo.useEffect\"], [\n        selectedTag,\n        rulerFiles,\n        onTagChange\n    ]);\n    const rulerInfo = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CountryInfo.useMemo[rulerInfo]\": ()=>{\n            // Helper function to get ruler info for a tag\n            const getRulerInfoForTag = {\n                \"CountryInfo.useMemo[rulerInfo].getRulerInfoForTag\": (tag)=>{\n                    if (!rulerFiles || !rulerFiles[tag]) return null;\n                    const rulers = rulerFiles[tag].rulers;\n                    if (!rulers) return null;\n                    const rulerData = rulers[year.toString()];\n                    if (!rulerData) return null;\n                    return rulerData;\n                }\n            }[\"CountryInfo.useMemo[rulerInfo].getRulerInfoForTag\"];\n            if (!rulerFiles || !metadata || !selectedTag) {\n                return {\n                    tag: null,\n                    info: null\n                };\n            }\n            // Try to get ruler info for the selected tag\n            let rulerData = getRulerInfoForTag(selectedTag);\n            let effectiveTag = selectedTag;\n            // If no ruler info, try fallback tags: ROM -> BYZ -> ROW\n            if (!rulerData) {\n                const fallbackTags = [\n                    'ROM',\n                    'BYZ',\n                    'ROW'\n                ];\n                for (const fallbackTag of fallbackTags){\n                    if (fallbackTag !== selectedTag) {\n                        rulerData = getRulerInfoForTag(fallbackTag);\n                        if (rulerData) {\n                            console.log(\"Falling back to \".concat(fallbackTag));\n                            effectiveTag = fallbackTag;\n                            // Auto-switch to the fallback tag\n                            onTagChange(fallbackTag);\n                            break;\n                        }\n                    }\n                }\n            }\n            if (!rulerData) {\n                return {\n                    tag: effectiveTag,\n                    info: null\n                };\n            }\n            return {\n                tag: effectiveTag,\n                info: {\n                    name: rulerData.name,\n                    dynasty: rulerData.dynasty,\n                    title: rulerData.title\n                }\n            };\n        }\n    }[\"CountryInfo.useMemo[rulerInfo]\"], [\n        selectedTag,\n        year,\n        rulerFiles,\n        metadata,\n        onTagChange\n    ]);\n    if (!rulerInfo.tag || !rulerInfo.info || !metadata) {\n        return null;\n    }\n    const displayTag = rulerInfo.tag;\n    const displayInfo = rulerInfo.info;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"absolute bottom-5 left-5 w-60 bg-[#1a1a24] border-2 border-[#2a2a3a] p-4 shadow-[inset_0_0_0_1px_#0a0a10,0_2px_0_#0a0a10] text-amber-400\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                className: \" text-4xl font-bold mb-2 text-center\",\n                children: (metadata === null || metadata === void 0 ? void 0 : (_metadata_tags_displayTag = metadata.tags[displayTag]) === null || _metadata_tags_displayTag === void 0 ? void 0 : _metadata_tags_displayTag.name) || displayTag\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\CountryInfo.tsx\",\n                lineNumber: 127,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"space-y-1 text-2xl text-center\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-amber-600 text-lg\",\n                            children: \"Emperor\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\CountryInfo.tsx\",\n                            lineNumber: 129,\n                            columnNumber: 20\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-3xl\",\n                            children: displayInfo.name\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\CountryInfo.tsx\",\n                            lineNumber: 130,\n                            columnNumber: 21\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-lg text-amber-600\",\n                            children: \"of the \"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\CountryInfo.tsx\",\n                            lineNumber: 131,\n                            columnNumber: 21\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-2xl\",\n                            children: displayInfo.dynasty\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\CountryInfo.tsx\",\n                            lineNumber: 132,\n                            columnNumber: 21\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-lg text-amber-600\",\n                            children: \"dynasty\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\CountryInfo.tsx\",\n                            lineNumber: 133,\n                            columnNumber: 21\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\CountryInfo.tsx\",\n                    lineNumber: 129,\n                    columnNumber: 17\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\CountryInfo.tsx\",\n                lineNumber: 128,\n                columnNumber: 13\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\CountryInfo.tsx\",\n        lineNumber: 126,\n        columnNumber: 9\n    }, this);\n}\n_s(CountryInfo, \"l1iTDEBejHj/l88dmw8qzVnGwOs=\");\n_c = CountryInfo;\nvar _c;\n$RefreshReg$(_c, \"CountryInfo\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL0NvdW50cnlJbmZvLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFFcUQ7QUFTdEMsU0FBU0csWUFBYSxLQUFrRDtRQUFsRCxFQUFDQyxXQUFXLEVBQUVDLElBQUksRUFBRUMsV0FBVyxFQUFtQixHQUFsRDtRQW1INkJDOztJQWpIOUQsTUFBTSxDQUFDQyxZQUFZQyxjQUFjLEdBQUdULCtDQUFRQSxDQUE0QixDQUFDO0lBQ3pFLE1BQU0sQ0FBQ08sVUFBVUcsWUFBWSxHQUFHViwrQ0FBUUEsQ0FBcUI7SUFHN0QsMENBQTBDO0lBQzFDQyxnREFBU0E7aUNBQUM7WUFFTixlQUFlVTtnQkFFWCxNQUFNQyxpQkFBOEIsTUFBTUMsTUFBTSw0QkFBNEJDLElBQUk7NkRBQUNDLENBQUFBLE1BQU9BLElBQUlDLElBQUk7O2dCQUNoRyxNQUFNQyxZQUF1QyxDQUFDO2dCQUU5QyxJQUFJTCxlQUFlTSxJQUFJLEVBQUU7b0JBQ3JCLE1BQU1DLFdBQVdDLE9BQU9DLElBQUksQ0FBQ1QsZUFBZU0sSUFBSTtvQkFDaEQsTUFBTUksa0JBQWtCSCxTQUFTSSxHQUFHO2lGQUFDLE9BQU9DOzRCQUN4QyxJQUFJO2dDQUNBLE1BQU1ULE1BQU0sTUFBTUYsTUFBTSxtQkFBdUIsT0FBSlcsS0FBSTtnQ0FDL0MsSUFBSVQsSUFBSVUsRUFBRSxFQUFFO29DQUNSLE1BQU1DLE9BQU8sTUFBTVgsSUFBSUMsSUFBSTtvQ0FDM0IsT0FBTzt3Q0FBRVE7d0NBQUtFO29DQUFLO2dDQUN2Qjs0QkFDSixFQUFFLFVBQU07Z0NBQ0pDLFFBQVFDLEdBQUcsQ0FBQyxxQkFBeUIsT0FBSko7NEJBQ3JDOzRCQUNBLE9BQU87d0JBQ1g7O29CQUVKLE1BQU1LLFVBQVUsTUFBTUMsUUFBUUMsR0FBRyxDQUFDVDtvQkFDbEMsS0FBSyxNQUFNVSxVQUFVSCxRQUFTO3dCQUMxQixJQUFJRyxRQUFROzRCQUNSZixTQUFTLENBQUNlLE9BQU9SLEdBQUcs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QUFJQyxXQUFVO3NDQUFZRixZQUFZSCxPQUFPOzs7Ozs7c0NBQzlDLDhEQUFDSTs0QkFBSUMsV0FBVTtzQ0FBeUI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBSTVEO0dBN0h3QjdDO0tBQUFBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFlpbWluZyBTdVxcRGVza3RvcFxccmVwb3NcXHJvbWFuLXN0b3J5XFxmcm9udGVuZFxcc3JjXFxjb21wb25lbnRzXFxDb3VudHJ5SW5mby50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXHJcblxyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgdHlwZSB7IE1hcE1ldGFkYXRhLCBSdWxlckZpbGUgfSBmcm9tICdAL2xpYi9tYXAtcmVuZGVyZXIvdHlwZXMnO1xyXG5cclxuaW50ZXJmYWNlIENvdW50cnlJbmZvUHJvcHMge1xyXG4gICAgc2VsZWN0ZWRUYWc6IHN0cmluZyB8IG51bGw7XHJcbiAgICB5ZWFyOiBudW1iZXI7XHJcbiAgICBvblRhZ0NoYW5nZTogKHRhZzogc3RyaW5nKSA9PiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb3VudHJ5SW5mbygge3NlbGVjdGVkVGFnLCB5ZWFyLCBvblRhZ0NoYW5nZX06IENvdW50cnlJbmZvUHJvcHMpIHtcclxuXHJcbiAgICBjb25zdCBbcnVsZXJGaWxlcywgc2V0UnVsZXJGaWxlc10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBSdWxlckZpbGU+Pih7fSlcclxuICAgIGNvbnN0IFttZXRhZGF0YSwgc2V0TWV0YWRhdGFdID0gdXNlU3RhdGU8TWFwTWV0YWRhdGEgfCBudWxsPihudWxsKTtcclxuXHJcblxyXG4gICAgLy8gSW5pdGlhbGl6YXRpb24sIGdldHMgbGlzdCBvZiBhbGwgcnVsZXJzXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG5cclxuICAgICAgICBhc3luYyBmdW5jdGlvbiBmZXRjaFJ1bGVyRmlsZXMoKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBsb2FkZWRNZXRhZGF0YTogTWFwTWV0YWRhdGEgPSBhd2FpdCBmZXRjaCgnL3Byb3ZpbmNlcy1tZXRhZGF0YS5qc29uJykudGhlbihyZXMgPT4gcmVzLmpzb24oKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJ1bGVyRGF0YTogUmVjb3JkPHN0cmluZywgUnVsZXJGaWxlPiA9IHt9O1xyXG5cclxuICAgICAgICAgICAgaWYgKGxvYWRlZE1ldGFkYXRhLnRhZ3MpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhZ05hbWVzID0gT2JqZWN0LmtleXMobG9hZGVkTWV0YWRhdGEudGFncyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoaXN0b3J5UHJvbWlzZXMgPSB0YWdOYW1lcy5tYXAoYXN5bmMgKHRhZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAvaGlzdG9yeS9ydWxlcnMvJHt0YWd9Lmpzb25gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB0YWcsIGRhdGEgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgTm8gcnVsZXIgZmlsZSBmb3IgJHt0YWd9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoaGlzdG9yeVByb21pc2VzKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bGVyRGF0YVtyZXN1bHQudGFnXSA9IHJlc3VsdC5kYXRhO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMb2FkZWQgcnVsZXIgZmlsZXM6JywgT2JqZWN0LmtleXMocnVsZXJEYXRhKSk7XHJcbiAgICAgICAgICAgIHNldFJ1bGVyRmlsZXMocnVsZXJEYXRhKTtcclxuICAgICAgICAgICAgc2V0TWV0YWRhdGEobG9hZGVkTWV0YWRhdGEpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgZmV0Y2hSdWxlckZpbGVzKCk7XHJcbiAgICB9LCBbXSlcclxuXHJcbiAgICAvLyBBdXRvLXNlbGVjdCBST00gd2hlbiBzZWxlY3RlZFRhZyBpcyBudWxsIGFuZCBkYXRhIGlzIGxvYWRlZFxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBpZiAoIXNlbGVjdGVkVGFnICYmIE9iamVjdC5rZXlzKHJ1bGVyRmlsZXMpLmxlbmd0aCA+IDAgJiYgcnVsZXJGaWxlc1snUk9NJ10pIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0F1dG8tc2VsZWN0aW5nIFJPTScpO1xyXG4gICAgICAgICAgICBvblRhZ0NoYW5nZSgnUk9NJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgW3NlbGVjdGVkVGFnLCBydWxlckZpbGVzLCBvblRhZ0NoYW5nZV0pO1xyXG5cclxuICAgIGNvbnN0IHJ1bGVySW5mbyA9IHVzZU1lbW8oKCkgPT4ge1xyXG4gICAgICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgcnVsZXIgaW5mbyBmb3IgYSB0YWdcclxuICAgICAgICBjb25zdCBnZXRSdWxlckluZm9Gb3JUYWcgPSAodGFnOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFydWxlckZpbGVzIHx8ICFydWxlckZpbGVzW3RhZ10pIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcnVsZXJzID0gcnVsZXJGaWxlc1t0YWddLnJ1bGVycztcclxuICAgICAgICAgICAgaWYgKCFydWxlcnMpIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcnVsZXJEYXRhID0gcnVsZXJzW3llYXIudG9TdHJpbmcoKV07XHJcbiAgICAgICAgICAgIGlmICghcnVsZXJEYXRhKSByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBydWxlckRhdGE7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKCFydWxlckZpbGVzIHx8ICFtZXRhZGF0YSB8fCAhc2VsZWN0ZWRUYWcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdGFnOiBudWxsLCBpbmZvOiBudWxsIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRyeSB0byBnZXQgcnVsZXIgaW5mbyBmb3IgdGhlIHNlbGVjdGVkIHRhZ1xyXG4gICAgICAgIGxldCBydWxlckRhdGEgPSBnZXRSdWxlckluZm9Gb3JUYWcoc2VsZWN0ZWRUYWcpO1xyXG4gICAgICAgIGxldCBlZmZlY3RpdmVUYWcgPSBzZWxlY3RlZFRhZztcclxuICAgICAgICBcclxuICAgICAgICAvLyBJZiBubyBydWxlciBpbmZvLCB0cnkgZmFsbGJhY2sgdGFnczogUk9NIC0+IEJZWiAtPiBST1dcclxuICAgICAgICBpZiAoIXJ1bGVyRGF0YSkge1xyXG4gICAgICAgICAgICBjb25zdCBmYWxsYmFja1RhZ3MgPSBbJ1JPTScsICdCWVonLCAnUk9XJ107XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmFsbGJhY2tUYWcgb2YgZmFsbGJhY2tUYWdzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmFsbGJhY2tUYWcgIT09IHNlbGVjdGVkVGFnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcnVsZXJEYXRhID0gZ2V0UnVsZXJJbmZvRm9yVGFnKGZhbGxiYWNrVGFnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocnVsZXJEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBGYWxsaW5nIGJhY2sgdG8gJHtmYWxsYmFja1RhZ31gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWZmZWN0aXZlVGFnID0gZmFsbGJhY2tUYWc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEF1dG8tc3dpdGNoIHRvIHRoZSBmYWxsYmFjayB0YWdcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25UYWdDaGFuZ2UoZmFsbGJhY2tUYWcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCFydWxlckRhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdGFnOiBlZmZlY3RpdmVUYWcsIGluZm86IG51bGwgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdGFnOiBlZmZlY3RpdmVUYWcsXHJcbiAgICAgICAgICAgIGluZm86IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IHJ1bGVyRGF0YS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgZHluYXN0eTogcnVsZXJEYXRhLmR5bmFzdHksXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogcnVsZXJEYXRhLnRpdGxlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSwgW3NlbGVjdGVkVGFnLCB5ZWFyLCBydWxlckZpbGVzLCBtZXRhZGF0YSwgb25UYWdDaGFuZ2VdKTtcclxuXHJcbiAgICBpZiAoIXJ1bGVySW5mby50YWcgfHwgIXJ1bGVySW5mby5pbmZvIHx8ICFtZXRhZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpc3BsYXlUYWcgPSBydWxlckluZm8udGFnO1xyXG4gICAgY29uc3QgZGlzcGxheUluZm8gPSBydWxlckluZm8uaW5mbztcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgYm90dG9tLTUgbGVmdC01IHctNjAgYmctWyMxYTFhMjRdIGJvcmRlci0yIGJvcmRlci1bIzJhMmEzYV0gcC00IHNoYWRvdy1baW5zZXRfMF8wXzBfMXB4XyMwYTBhMTAsMF8ycHhfMF8jMGEwYTEwXSB0ZXh0LWFtYmVyLTQwMFwiPlxyXG4gICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwiIHRleHQtNHhsIGZvbnQtYm9sZCBtYi0yIHRleHQtY2VudGVyXCI+e21ldGFkYXRhPy50YWdzIVtkaXNwbGF5VGFnXT8ubmFtZSB8fCBkaXNwbGF5VGFnfTwvaDI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0xIHRleHQtMnhsIHRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICA8cD48ZGl2IGNsYXNzTmFtZT1cInRleHQtYW1iZXItNjAwIHRleHQtbGdcIj5FbXBlcm9yPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtM3hsJz57ZGlzcGxheUluZm8ubmFtZX08L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtbGcgdGV4dC1hbWJlci02MDBcIj5vZiB0aGUgPC9kaXY+IFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LTJ4bCc+e2Rpc3BsYXlJbmZvLmR5bmFzdHl9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWxnIHRleHQtYW1iZXItNjAwXCI+ZHluYXN0eTwvZGl2PjwvcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZU1lbW8iLCJDb3VudHJ5SW5mbyIsInNlbGVjdGVkVGFnIiwieWVhciIsIm9uVGFnQ2hhbmdlIiwibWV0YWRhdGEiLCJydWxlckZpbGVzIiwic2V0UnVsZXJGaWxlcyIsInNldE1ldGFkYXRhIiwiZmV0Y2hSdWxlckZpbGVzIiwibG9hZGVkTWV0YWRhdGEiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJqc29uIiwicnVsZXJEYXRhIiwidGFncyIsInRhZ05hbWVzIiwiT2JqZWN0Iiwia2V5cyIsImhpc3RvcnlQcm9taXNlcyIsIm1hcCIsInRhZyIsIm9rIiwiZGF0YSIsImNvbnNvbGUiLCJsb2ciLCJyZXN1bHRzIiwiUHJvbWlzZSIsImFsbCIsInJlc3VsdCIsImxlbmd0aCIsInJ1bGVySW5mbyIsImdldFJ1bGVySW5mb0ZvclRhZyIsInJ1bGVycyIsInRvU3RyaW5nIiwiaW5mbyIsImVmZmVjdGl2ZVRhZyIsImZhbGxiYWNrVGFncyIsImZhbGxiYWNrVGFnIiwibmFtZSIsImR5bmFzdHkiLCJ0aXRsZSIsImRpc3BsYXlUYWciLCJkaXNwbGF5SW5mbyIsImRpdiIsImNsYXNzTmFtZSIsImgyIiwicCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/CountryInfo.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/components/MapCanvas.tsx":
/*!**************************************!*\
  !*** ./src/components/MapCanvas.tsx ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MapCanvas)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_map_renderer_gpu_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/map-renderer/gpu-context */ \"(app-pages-browser)/./src/lib/map-renderer/gpu-context.ts\");\n/* harmony import */ var _lib_map_renderer_viewport__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/map-renderer/viewport */ \"(app-pages-browser)/./src/lib/map-renderer/viewport.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n// Pack RGB to u32 (0x00RRGGBB)\nfunction packColor(r, g, b) {\n    return r << 16 | g << 8 | b;\n}\n// Parse hex color to RGB\nfunction hexToRgb(hex) {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    if (result) {\n        return [\n            parseInt(result[1], 16),\n            parseInt(result[2], 16),\n            parseInt(result[3], 16)\n        ];\n    }\n    return [\n        0,\n        0,\n        0\n    ]; // Default black for unknown tags\n}\nfunction MapCanvas(param) {\n    let { year = 2, onProvinceSelect } = param;\n    _s();\n    const canvasRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [gpuContext, setGpuContext] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [metadata, setMetadata] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [historyFiles, setHistoryFiles] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [canvasSize, setCanvasSize] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        width: 1920,\n        height: 1080\n    });\n    const viewport = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new _lib_map_renderer_viewport__WEBPACK_IMPORTED_MODULE_3__.MapViewport({\n        width: 5632,\n        height: 2304\n    }));\n    const isDragging = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const provinceTextureData = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const provinceToTagMap = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Map());\n    // Get color for a tag from metadata (returns dark gray for unknown tags, never 0)\n    const getTagColor = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"MapCanvas.useCallback[getTagColor]\": (tag, meta)=>{\n            if (meta.tags && meta.tags[tag]) {\n                const [r, g, b] = hexToRgb(meta.tags[tag].color);\n                return packColor(r, g, b);\n            }\n            // Use dark gray (16,16,16) instead of black (0,0,0) so it's not confused with \"no color\"\n            return packColor(16, 16, 16);\n        }\n    }[\"MapCanvas.useCallback[getTagColor]\"], []);\n    // Initialize GPU and load map\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MapCanvas.useEffect\": ()=>{\n            async function init() {\n                try {\n                    // Initalizes GPU\n                    const ctx = await _lib_map_renderer_gpu_context__WEBPACK_IMPORTED_MODULE_2__.MapGpuContext.create();\n                    console.log('Loading map data...');\n                    const [westRes, eastRes, metaRes] = await Promise.all([\n                        fetch('/provinces-west.bin'),\n                        fetch('/provinces-east.bin'),\n                        fetch('/provinces-metadata.json')\n                    ]);\n                    // Fetches Data\n                    const westData = new Uint16Array(await westRes.arrayBuffer());\n                    const eastData = new Uint16Array(await eastRes.arrayBuffer());\n                    const loadedMetadata = await metaRes.json();\n                    // Uploads textures\n                    await ctx.loadMapTextures(westData, eastData, loadedMetadata.westWidth, loadedMetadata.height);\n                    // Store combined province data for CPU-side click detection\n                    const totalWidth = loadedMetadata.westWidth * 2;\n                    const totalHeight = loadedMetadata.height;\n                    const combinedData = new Uint16Array(totalWidth * totalHeight);\n                    // Copy west data\n                    for(let y = 0; y < totalHeight; y++){\n                        const srcOffset = y * loadedMetadata.westWidth;\n                        const dstOffset = y * totalWidth;\n                        combinedData.set(westData.subarray(srcOffset, srcOffset + loadedMetadata.westWidth), dstOffset);\n                    }\n                    // Copy east data\n                    for(let y = 0; y < totalHeight; y++){\n                        const srcOffset = y * loadedMetadata.westWidth;\n                        const dstOffset = y * totalWidth + loadedMetadata.westWidth;\n                        combinedData.set(eastData.subarray(srcOffset, srcOffset + loadedMetadata.westWidth), dstOffset);\n                    }\n                    provinceTextureData.current = combinedData;\n                    ctx.createUniformBuffer(loadedMetadata.westWidth, loadedMetadata.height, loadedMetadata.provinceCount);\n                    ctx.createColorBuffers(loadedMetadata.provinceCount);\n                    // Load history files for all tags in metadata\n                    const historyData = {};\n                    if (loadedMetadata.tags) {\n                        const tagNames = Object.keys(loadedMetadata.tags);\n                        const historyPromises = tagNames.map({\n                            \"MapCanvas.useEffect.init.historyPromises\": async (tag)=>{\n                                try {\n                                    const res = await fetch(\"/history/provinces/\".concat(tag, \".json\"));\n                                    if (res.ok) {\n                                        const data = await res.json();\n                                        return {\n                                            tag,\n                                            data\n                                        };\n                                    }\n                                } catch (e) {\n                                    console.log(\"No history file for \".concat(tag));\n                                }\n                                return null;\n                            }\n                        }[\"MapCanvas.useEffect.init.historyPromises\"]);\n                        const results = await Promise.all(historyPromises);\n                        for (const result of results){\n                            if (result) {\n                                historyData[result.tag] = result.data;\n                            }\n                        }\n                    }\n                    console.log('Loaded history files:', Object.keys(historyData));\n                    setHistoryFiles(historyData);\n                    setMetadata(loadedMetadata);\n                    const format = navigator.gpu.getPreferredCanvasFormat();\n                    await ctx.createRenderPipeline(format);\n                    setGpuContext(ctx);\n                    setIsLoading(false);\n                } catch (err) {\n                    console.error('Initialization error:', err);\n                    setError(err instanceof Error ? err.message : 'Unknown error');\n                    setIsLoading(false);\n                }\n            }\n            init();\n        }\n    }[\"MapCanvas.useEffect\"], []);\n    // Update map colors when year changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MapCanvas.useEffect\": ()=>{\n            if (!gpuContext || !metadata || Object.keys(historyFiles).length === 0) return;\n            const seaProvinces = new Set(metadata.seaProvinces || []);\n            const defaultLandColor = packColor(94, 94, 94);\n            const seaColor = packColor(68, 107, 163);\n            const primaryColors = new Uint32Array(metadata.provinceCount);\n            const ownerColors = new Uint32Array(metadata.provinceCount);\n            const secondaryColors = new Uint32Array(metadata.provinceCount);\n            // Initialize all provinces\n            for(let i = 0; i < metadata.provinceCount; i++){\n                if (seaProvinces.has(i)) {\n                    primaryColors[i] = seaColor;\n                    ownerColors[i] = seaColor;\n                    secondaryColors[i] = 0; // No stripes for sea\n                } else {\n                    primaryColors[i] = defaultLandColor;\n                    ownerColors[i] = defaultLandColor;\n                    secondaryColors[i] = 0;\n                }\n            }\n            // Apply historical data for each country\n            const yearStr = String(year);\n            provinceToTagMap.current.clear();\n            for (const [tag, history] of Object.entries(historyFiles)){\n                const yearData = history[yearStr];\n                if (!yearData || !Array.isArray(yearData)) continue;\n                const tagColor = getTagColor(tag, metadata);\n                for (const province of yearData){\n                    const provId = province.ID;\n                    if (provId >= metadata.provinceCount || seaProvinces.has(provId)) continue;\n                    // Map province to its owning tag\n                    provinceToTagMap.current.set(provId, tag);\n                    // Set province color to tag's color\n                    primaryColors[provId] = tagColor;\n                    ownerColors[provId] = tagColor;\n                    // Handle occupation\n                    if (province.CONTROL && province.CONTROL !== '') {\n                        // Province is occupied - show stripes with occupier's color\n                        const occupierColor = getTagColor(province.CONTROL, metadata);\n                        secondaryColors[provId] = occupierColor;\n                    } else {\n                        secondaryColors[provId] = 0; // No occupation, no stripes\n                    }\n                }\n            }\n            gpuContext.updateProvinceColors(primaryColors);\n            gpuContext.updateOwnerColors(ownerColors);\n            gpuContext.updateSecondaryColors(secondaryColors);\n            console.log(\"Map updated for year \".concat(year));\n        }\n    }[\"MapCanvas.useEffect\"], [\n        year,\n        gpuContext,\n        metadata,\n        historyFiles,\n        getTagColor\n    ]);\n    // Configure canvas and handle resize\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MapCanvas.useEffect\": ()=>{\n            if (!gpuContext || !canvasRef.current || !containerRef.current) return;\n            const updateSize = {\n                \"MapCanvas.useEffect.updateSize\": ()=>{\n                    const container = containerRef.current;\n                    const width = container.clientWidth;\n                    const height = container.clientHeight;\n                    setCanvasSize({\n                        width,\n                        height\n                    });\n                    viewport.current.resize(width, height);\n                    viewport.current.fitToScreen();\n                    gpuContext.configureCanvas(canvasRef.current, width, height);\n                    console.log(\"Canvas configured: \".concat(width, \"x\").concat(height));\n                }\n            }[\"MapCanvas.useEffect.updateSize\"];\n            updateSize();\n            const resizeObserver = new ResizeObserver(updateSize);\n            resizeObserver.observe(containerRef.current);\n            return ({\n                \"MapCanvas.useEffect\": ()=>resizeObserver.disconnect()\n            })[\"MapCanvas.useEffect\"];\n        }\n    }[\"MapCanvas.useEffect\"], [\n        gpuContext\n    ]);\n    // Render loop\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MapCanvas.useEffect\": ()=>{\n            if (!gpuContext || !canvasRef.current) return;\n            let frameId;\n            function animate() {\n                // Update GPU with current viewport\n                const uniforms = viewport.current.getUniforms();\n                gpuContext.updateUniforms({\n                    x: uniforms.view_x,\n                    y: uniforms.view_y,\n                    width: uniforms.view_width,\n                    height: uniforms.view_height,\n                    zoom: uniforms.zoom_level\n                });\n                gpuContext.render();\n                frameId = requestAnimationFrame(animate);\n            }\n            console.log('Starting render loop...');\n            animate();\n            return ({\n                \"MapCanvas.useEffect\": ()=>cancelAnimationFrame(frameId)\n            })[\"MapCanvas.useEffect\"];\n        }\n    }[\"MapCanvas.useEffect\"], [\n        gpuContext\n    ]);\n    // Mouse/wheel event handlers\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MapCanvas.useEffect\": ()=>{\n            const canvas = canvasRef.current;\n            if (!canvas || isLoading) return;\n            let mouseDownPos = null;\n            const onMouseDown = {\n                \"MapCanvas.useEffect.onMouseDown\": (e)=>{\n                    if (e.button === 0) {\n                        isDragging.current = false;\n                        mouseDownPos = {\n                            x: e.clientX,\n                            y: e.clientY\n                        };\n                    }\n                }\n            }[\"MapCanvas.useEffect.onMouseDown\"];\n            const onMouseUp = {\n                \"MapCanvas.useEffect.onMouseUp\": (e)=>{\n                    if (e.button === 0 && mouseDownPos) {\n                        const dragDistance = Math.sqrt(Math.pow(e.clientX - mouseDownPos.x, 2) + Math.pow(e.clientY - mouseDownPos.y, 2));\n                        // Only treat as click if drag distance is very small (< 5 pixels)\n                        if (dragDistance < 5 && onProvinceSelect && provinceTextureData.current && metadata) {\n                            // Click without drag - select province\n                            const rect = canvas.getBoundingClientRect();\n                            const canvasX = e.clientX - rect.left;\n                            const canvasY = e.clientY - rect.top;\n                            // Convert canvas coordinates to map coordinates using viewport\n                            const mapCoords = viewport.current.screenToMap(canvasX, canvasY);\n                            const mapX = Math.floor(mapCoords.x);\n                            const mapY = Math.floor(mapCoords.y);\n                            // Get province ID from texture data\n                            const totalWidth = metadata.westWidth * 2;\n                            if (mapX >= 0 && mapX < totalWidth && mapY >= 0 && mapY < metadata.height) {\n                                const index = mapY * totalWidth + mapX;\n                                const provinceId = provinceTextureData.current[index];\n                                // Find the tag that owns this province\n                                const owningTag = provinceToTagMap.current.get(provinceId);\n                                console.log(\"Clicked province \".concat(provinceId, \", owned by: \").concat(owningTag || 'none'));\n                                // Only update selection if the province is owned by a tag\n                                if (owningTag) {\n                                    onProvinceSelect(owningTag);\n                                }\n                            }\n                        }\n                        isDragging.current = false;\n                        mouseDownPos = null;\n                    }\n                }\n            }[\"MapCanvas.useEffect.onMouseUp\"];\n            const onMouseMove = {\n                \"MapCanvas.useEffect.onMouseMove\": (e)=>{\n                    if (mouseDownPos) {\n                        const dragDistance = Math.sqrt(Math.pow(e.clientX - mouseDownPos.x, 2) + Math.pow(e.clientY - mouseDownPos.y, 2));\n                        if (dragDistance > 5 && !isDragging.current) {\n                            isDragging.current = true;\n                        }\n                        if (isDragging.current) {\n                            viewport.current.pan(-e.movementX, -e.movementY);\n                        }\n                    }\n                }\n            }[\"MapCanvas.useEffect.onMouseMove\"];\n            const onWheel = {\n                \"MapCanvas.useEffect.onWheel\": (e)=>{\n                    e.preventDefault();\n                    const zoomDelta = e.deltaY > 0 ? 0.9 : 1.1;\n                    viewport.current.zoomAt(e.offsetX, e.offsetY, zoomDelta);\n                }\n            }[\"MapCanvas.useEffect.onWheel\"];\n            canvas.addEventListener('mousedown', onMouseDown);\n            canvas.addEventListener('mouseup', onMouseUp);\n            canvas.addEventListener('mouseleave', onMouseUp);\n            canvas.addEventListener('mousemove', onMouseMove);\n            canvas.addEventListener('wheel', onWheel, {\n                passive: false\n            });\n            return ({\n                \"MapCanvas.useEffect\": ()=>{\n                    canvas.removeEventListener('mousedown', onMouseDown);\n                    canvas.removeEventListener('mouseup', onMouseUp);\n                    canvas.removeEventListener('mouseleave', onMouseUp);\n                    canvas.removeEventListener('mousemove', onMouseMove);\n                    canvas.removeEventListener('wheel', onWheel);\n                }\n            })[\"MapCanvas.useEffect\"];\n        }\n    }[\"MapCanvas.useEffect\"], [\n        isLoading,\n        onProvinceSelect,\n        metadata\n    ]);\n    if (error) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex items-center justify-center w-full h-full bg-red-950 text-red-200\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"text-xl font-bold mb-2\",\n                        children: \"WebGPU Error\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\MapCanvas.tsx\",\n                        lineNumber: 358,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        children: error\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\MapCanvas.tsx\",\n                        lineNumber: 359,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\MapCanvas.tsx\",\n                lineNumber: 357,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\MapCanvas.tsx\",\n            lineNumber: 356,\n            columnNumber: 7\n        }, this);\n    }\n    if (isLoading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex items-center justify-center w-full h-full bg-gray-900 text-gray-200\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\MapCanvas.tsx\",\n                        lineNumber: 369,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        children: \"Loading map...\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\MapCanvas.tsx\",\n                        lineNumber: 370,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\MapCanvas.tsx\",\n                lineNumber: 368,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\MapCanvas.tsx\",\n            lineNumber: 367,\n            columnNumber: 7\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: containerRef,\n        className: \"w-full h-full overflow-hidden bg-black\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"canvas\", {\n            ref: canvasRef,\n            width: canvasSize.width,\n            height: canvasSize.height,\n            className: \"block bg-black\"\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\MapCanvas.tsx\",\n            lineNumber: 378,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\MapCanvas.tsx\",\n        lineNumber: 377,\n        columnNumber: 5\n    }, this);\n}\n_s(MapCanvas, \"IG5htTlsInjbJgGX3+97BUkojP8=\");\n_c = MapCanvas;\nvar _c;\n$RefreshReg$(_c, \"MapCanvas\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL01hcENhbnZhcy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFFaUU7QUFDRjtBQUVMO0FBRTFELCtCQUErQjtBQUMvQixTQUFTTSxVQUFVQyxDQUFTLEVBQUVDLENBQVMsRUFBRUMsQ0FBUztJQUNoRCxPQUFPLEtBQU0sS0FBT0QsS0FBSyxJQUFLQztBQUNoQztBQUVBLHlCQUF5QjtBQUN6QixTQUFTQyxTQUFTQyxHQUFXO0lBQzNCLE1BQU1DLFNBQVMsNENBQTRDQyxJQUFJLENBQUNGO0lBQ2hFLElBQUlDLFFBQVE7UUFDVixPQUFPO1lBQUNFLFNBQVNGLE1BQU0sQ0FBQyxFQUFFLEVBQUU7WUFBS0UsU0FBU0YsTUFBTSxDQUFDLEVBQUUsRUFBRTtZQUFLRSxTQUFTRixNQUFNLENBQUMsRUFBRSxFQUFFO1NBQUk7SUFDcEY7SUFDQSxPQUFPO1FBQUM7UUFBRztRQUFHO0tBQUUsRUFBRSxpQ0FBaUM7QUFDckQ7QUFPZSxTQUFTRyxVQUFVLEtBQThDO1FBQTlDLEVBQUVDLE9BQU8sQ0FBQyxFQUFFQyxnQkFBZ0IsRUFBa0IsR0FBOUM7O0lBQ2hDLE1BQU1DLFlBQVlqQiw2Q0FBTUEsQ0FBb0I7SUFDNUMsTUFBTWtCLGVBQWVsQiw2Q0FBTUEsQ0FBaUI7SUFDNUMsTUFBTSxDQUFDbUIsWUFBWUMsY0FBYyxHQUFHbkIsK0NBQVFBLENBQXVCO0lBQ25FLE1BQU0sQ0FBQ29CLFVBQVVDLFlBQVksR0FBR3JCLCtDQUFRQSxDQUFxQjtJQUM3RCxNQUFNLENBQUNzQixjQUFjQyxnQkFBZ0IsR0FBR3ZCLCtDQUFRQSxDQUFpQyxDQUFDO0lBQ2xGLE1BQU0sQ0FBQ3dCLFdBQVdDLGFBQWEsR0FBR3pCLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQzBCLE9BQU9DLFNBQVMsR0FBRzNCLCtDQUFRQSxDQUFnQjtJQUNsRCxNQUFNLENBQUM0QixZQUFZQyxjQUFjLEdBQUc3QiwrQ0FBUUEsQ0FBQztRQUFF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QWdCLENBQUMsYUFBYVg7WUFDckMzQixPQUFPc0MsZ0JBQWdCLENBQUMsU0FBU1AsU0FBUztnQkFBRVEsU0FBUztZQUFNO1lBRTNEO3VDQUFPO29CQUNMdkMsT0FBT3dDLG1CQUFtQixDQUFDLGFBQWF0QztvQkFDeENGLE9BQU93QyxtQkFBbUIsQ0FBQyxXQUFXakM7b0JBQ3RDUCxPQUFPd0MsbUJBQW1CLENBQUMsY0FBY2pDO29CQUN6Q1AsT0FBT3dDLG1CQUFtQixDQUFDLGFBQWFiO29CQUN4QzNCLE9BQU93QyxtQkFBbUIsQ0FBQyxTQUFTVDtnQkFDdEM7O1FBQ0Y7OEJBQUc7UUFBQ3hKO1FBQVdUO1FBQWtCSztLQUFTO0lBRzFDLElBQUlNLE9BQU87UUFDVCxxQkFDRSw4REFBQ2dLO1lBQUlDLFdBQVU7c0JBQ2IsNEVBQUNEO2dCQUFJQyxXQUFVOztrQ0FDYiw4REFBQ0M7d0JBQUdELFdBQVU7a0NBQXlCOzs7Ozs7a0NBQ3ZDLDhEQUFDRTtrQ0FBR25LOzs7Ozs7Ozs7Ozs7Ozs7OztJQUlaO0lBRUEsSUFBSUYsV0FBVztRQUNiLHFCQUNFLDhEQUFDa0s7WUFBSUMsV0FBVTtzQkFDYiw0RUFBQ0Q7Z0JBQUlDLFdBQVU7O2tDQUNiLDhEQUFDRDt3QkFBSUMsV0FBVTs7Ozs7O2tDQUNmLDhEQUFDRTtrQ0FBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFJWDtJQUVBLHFCQUNFLDhEQUFDSDtRQUFJSSxLQUFLN0s7UUFBYzBLLFdBQVU7a0JBQ2hDLDRFQUFDMUM7WUFDQzZDLEtBQUs5SztZQUNMYyxPQUFPRixXQUFXRSxLQUFLO1lBQ3ZCQyxRQUFRSCxXQUFXRyxNQUFNO1lBQ3pCNEosV0FBVTs7Ozs7Ozs7Ozs7QUFJbEI7R0F2V3dCOUs7S0FBQUEiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcWWltaW5nIFN1XFxEZXNrdG9wXFxyZXBvc1xccm9tYW4tc3RvcnlcXGZyb250ZW5kXFxzcmNcXGNvbXBvbmVudHNcXE1hcENhbnZhcy50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXHJcblxyXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBNYXBHcHVDb250ZXh0IH0gZnJvbSAnQC9saWIvbWFwLXJlbmRlcmVyL2dwdS1jb250ZXh0JztcclxuaW1wb3J0IHR5cGUgeyBNYXBNZXRhZGF0YSwgUHJvdmluY2VIaXN0b3J5RW50cnksIENvdW50cnlIaXN0b3J5IH0gZnJvbSAnQC9saWIvbWFwLXJlbmRlcmVyL3R5cGVzJztcclxuaW1wb3J0IHsgTWFwVmlld3BvcnQgfSBmcm9tICdAL2xpYi9tYXAtcmVuZGVyZXIvdmlld3BvcnQnO1xyXG5cclxuLy8gUGFjayBSR0IgdG8gdTMyICgweDAwUlJHR0JCKVxyXG5mdW5jdGlvbiBwYWNrQ29sb3IocjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlcik6IG51bWJlciB7XHJcbiAgcmV0dXJuIChyIDw8IDE2KSB8IChnIDw8IDgpIHwgYjtcclxufVxyXG5cclxuLy8gUGFyc2UgaGV4IGNvbG9yIHRvIFJHQlxyXG5mdW5jdGlvbiBoZXhUb1JnYihoZXg6IHN0cmluZyk6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gL14jPyhbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KSQvaS5leGVjKGhleCk7XHJcbiAgaWYgKHJlc3VsdCkge1xyXG4gICAgcmV0dXJuIFtwYXJzZUludChyZXN1bHRbMV0sIDE2KSwgcGFyc2VJbnQocmVzdWx0WzJdLCAxNiksIHBhcnNlSW50KHJlc3VsdFszXSwgMTYpXTtcclxuICB9XHJcbiAgcmV0dXJuIFswLCAwLCAwXTsgLy8gRGVmYXVsdCBibGFjayBmb3IgdW5rbm93biB0YWdzXHJcbn1cclxuXHJcbmludGVyZmFjZSBNYXBDYW52YXNQcm9wcyB7XHJcbiAgeWVhcj86IG51bWJlcjtcclxuICBvblByb3ZpbmNlU2VsZWN0PzogKHRhZzogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTWFwQ2FudmFzKHsgeWVhciA9IDIsIG9uUHJvdmluY2VTZWxlY3QgfTogTWFwQ2FudmFzUHJvcHMpIHtcclxuICBjb25zdCBjYW52YXNSZWYgPSB1c2VSZWY8SFRNTENhbnZhc0VsZW1lbnQ+KG51bGwpO1xyXG4gIGNvbnN0IGNvbnRhaW5lclJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XHJcbiAgY29uc3QgW2dwdUNvbnRleHQsIHNldEdwdUNvbnRleHRdID0gdXNlU3RhdGU8TWFwR3B1Q29udGV4dCB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFttZXRhZGF0YSwgc2V0TWV0YWRhdGFdID0gdXNlU3RhdGU8TWFwTWV0YWRhdGEgfCBudWxsPihudWxsKTtcclxuICBjb25zdCBbaGlzdG9yeUZpbGVzLCBzZXRIaXN0b3J5RmlsZXNdID0gdXNlU3RhdGU8UmVjb3JkPHN0cmluZywgQ291bnRyeUhpc3Rvcnk+Pih7fSk7XHJcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xyXG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XHJcbiAgY29uc3QgW2NhbnZhc1NpemUsIHNldENhbnZhc1NpemVdID0gdXNlU3RhdGUoeyB3aWR0aDogMTkyMCwgaGVpZ2h0OiAxMDgwIH0pO1xyXG4gIGNvbnN0IHZpZXdwb3J0ID0gdXNlUmVmKG5ldyBNYXBWaWV3cG9ydCh7IHdpZHRoOiA1NjMyLCBoZWlnaHQ6IDIzMDQgfSkpO1xyXG4gIGNvbnN0IGlzRHJhZ2dpbmcgPSB1c2VSZWYoZmFsc2UpO1xyXG4gIGNvbnN0IHByb3ZpbmNlVGV4dHVyZURhdGEgPSB1c2VSZWY8VWludDE2QXJyYXkgfCBudWxsPihudWxsKTtcclxuICBjb25zdCBwcm92aW5jZVRvVGFnTWFwID0gdXNlUmVmPE1hcDxudW1iZXIsIHN0cmluZz4+KG5ldyBNYXAoKSk7XHJcblxyXG4gIC8vIEdldCBjb2xvciBmb3IgYSB0YWcgZnJvbSBtZXRhZGF0YSAocmV0dXJucyBkYXJrIGdyYXkgZm9yIHVua25vd24gdGFncywgbmV2ZXIgMClcclxuICBjb25zdCBnZXRUYWdDb2xvciA9IHVzZUNhbGxiYWNrKCh0YWc6IHN0cmluZywgbWV0YTogTWFwTWV0YWRhdGEpOiBudW1iZXIgPT4ge1xyXG4gICAgaWYgKG1ldGEudGFncyAmJiBtZXRhLnRhZ3NbdGFnXSkge1xyXG4gICAgICBjb25zdCBbciwgZywgYl0gPSBoZXhUb1JnYihtZXRhLnRhZ3NbdGFnXS5jb2xvcik7XHJcbiAgICAgIHJldHVybiBwYWNrQ29sb3IociwgZywgYik7XHJcbiAgICB9XHJcbiAgICAvLyBVc2UgZGFyayBncmF5ICgxNiwxNiwxNikgaW5zdGVhZCBvZiBibGFjayAoMCwwLDApIHNvIGl0J3Mgbm90IGNvbmZ1c2VkIHdpdGggXCJubyBjb2xvclwiXHJcbiAgICByZXR1cm4gcGFja0NvbG9yKDE2LCAxNiwgMTYpO1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgLy8gSW5pdGlhbGl6ZSBHUFUgYW5kIGxvYWQgbWFwXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGFzeW5jIGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8gSW5pdGFsaXplcyBHUFVcclxuICAgICAgICBjb25zdCBjdHggPSBhd2FpdCBNYXBHcHVDb250ZXh0LmNyZWF0ZSgpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnTG9hZGluZyBtYXAgZGF0YS4uLicpO1xyXG4gICAgICAgIGNvbnN0IFt3ZXN0UmVzLCBlYXN0UmVzLCBtZXRhUmVzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICAgIGZldGNoKCcvcHJvdmluY2VzLXdlc3QuYmluJyksXHJcbiAgICAgICAgICBmZXRjaCgnL3Byb3ZpbmNlcy1lYXN0LmJpbicpLFxyXG4gICAgICAgICAgZmV0Y2goJy9wcm92aW5jZXMtbWV0YWRhdGEuanNvbicpLFxyXG4gICAgICAgIF0pO1xyXG5cclxuICAgICAgICAvLyBGZXRjaGVzIERhdGFcclxuICAgICAgICBjb25zdCB3ZXN0RGF0YSA9IG5ldyBVaW50MTZBcnJheShhd2FpdCB3ZXN0UmVzLmFycmF5QnVmZmVyKCkpO1xyXG4gICAgICAgIGNvbnN0IGVhc3REYXRhID0gbmV3IFVpbnQxNkFycmF5KGF3YWl0IGVhc3RSZXMuYXJyYXlCdWZmZXIoKSk7XHJcbiAgICAgICAgY29uc3QgbG9hZGVkTWV0YWRhdGE6IE1hcE1ldGFkYXRhID0gYXdhaXQgbWV0YVJlcy5qc29uKCk7XHJcblxyXG4gICAgICAgIC8vIFVwbG9hZHMgdGV4dHVyZXNcclxuICAgICAgICBhd2FpdCBjdHgubG9hZE1hcFRleHR1cmVzKFxyXG4gICAgICAgICAgd2VzdERhdGEsXHJcbiAgICAgICAgICBlYXN0RGF0YSxcclxuICAgICAgICAgIGxvYWRlZE1ldGFkYXRhLndlc3RXaWR0aCxcclxuICAgICAgICAgIGxvYWRlZE1ldGFkYXRhLmhlaWdodFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIFN0b3JlIGNvbWJpbmVkIHByb3ZpbmNlIGRhdGEgZm9yIENQVS1zaWRlIGNsaWNrIGRldGVjdGlvblxyXG4gICAgICAgIGNvbnN0IHRvdGFsV2lkdGggPSBsb2FkZWRNZXRhZGF0YS53ZXN0V2lkdGggKiAyO1xyXG4gICAgICAgIGNvbnN0IHRvdGFsSGVpZ2h0ID0gbG9hZGVkTWV0YWRhdGEuaGVpZ2h0O1xyXG4gICAgICAgIGNvbnN0IGNvbWJpbmVkRGF0YSA9IG5ldyBVaW50MTZBcnJheSh0b3RhbFdpZHRoICogdG90YWxIZWlnaHQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENvcHkgd2VzdCBkYXRhXHJcbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCB0b3RhbEhlaWdodDsgeSsrKSB7XHJcbiAgICAgICAgICBjb25zdCBzcmNPZmZzZXQgPSB5ICogbG9hZGVkTWV0YWRhdGEud2VzdFdpZHRoO1xyXG4gICAgICAgICAgY29uc3QgZHN0T2Zmc2V0ID0geSAqIHRvdGFsV2lkdGg7XHJcbiAgICAgICAgICBjb21iaW5lZERhdGEuc2V0KHdlc3REYXRhLnN1YmFycmF5KHNyY09mZnNldCwgc3JjT2Zmc2V0ICsgbG9hZGVkTWV0YWRhdGEud2VzdFdpZHRoKSwgZHN0T2Zmc2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ29weSBlYXN0IGRhdGFcclxuICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRvdGFsSGVpZ2h0OyB5KyspIHtcclxuICAgICAgICAgIGNvbnN0IHNyY09mZnNldCA9IHkgKiBsb2FkZWRNZXRhZGF0YS53ZXN0V2lkdGg7XHJcbiAgICAgICAgICBjb25zdCBkc3RPZmZzZXQgPSB5ICogdG90YWxXaWR0aCArIGxvYWRlZE1ldGFkYXRhLndlc3RXaWR0aDtcclxuICAgICAgICAgIGNvbWJpbmVkRGF0YS5zZXQoZWFzdERhdGEuc3ViYXJyYXkoc3JjT2Zmc2V0LCBzcmNPZmZzZXQgKyBsb2FkZWRNZXRhZGF0YS53ZXN0V2lkdGgpLCBkc3RPZmZzZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwcm92aW5jZVRleHR1cmVEYXRhLmN1cnJlbnQgPSBjb21iaW5lZERhdGE7XHJcblxyXG4gICAgICAgIGN0eC5jcmVhdGVVbmlmb3JtQnVmZmVyKGxvYWRlZE1ldGFkYXRhLndlc3RXaWR0aCwgbG9hZGVkTWV0YWRhdGEuaGVpZ2h0LCBsb2FkZWRNZXRhZGF0YS5wcm92aW5jZUNvdW50KTtcclxuICAgICAgICBjdHguY3JlYXRlQ29sb3JCdWZmZXJzKGxvYWRlZE1ldGFkYXRhLnByb3ZpbmNlQ291bnQpO1xyXG5cclxuICAgICAgICAvLyBMb2FkIGhpc3RvcnkgZmlsZXMgZm9yIGFsbCB0YWdzIGluIG1ldGFkYXRhXHJcbiAgICAgICAgY29uc3QgaGlzdG9yeURhdGE6IFJlY29yZDxzdHJpbmcsIENvdW50cnlIaXN0b3J5PiA9IHt9O1xyXG4gICAgICAgIGlmIChsb2FkZWRNZXRhZGF0YS50YWdzKSB7XHJcbiAgICAgICAgICBjb25zdCB0YWdOYW1lcyA9IE9iamVjdC5rZXlzKGxvYWRlZE1ldGFkYXRhLnRhZ3MpO1xyXG4gICAgICAgICAgY29uc3QgaGlzdG9yeVByb21pc2VzID0gdGFnTmFtZXMubWFwKGFzeW5jICh0YWcpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgL2hpc3RvcnkvcHJvdmluY2VzLyR7dGFnfS5qc29uYCk7XHJcbiAgICAgICAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyB0YWcsIGRhdGEgfTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBObyBoaXN0b3J5IGZpbGUgZm9yICR7dGFnfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChoaXN0b3J5UHJvbWlzZXMpO1xyXG4gICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgaGlzdG9yeURhdGFbcmVzdWx0LnRhZ10gPSByZXN1bHQuZGF0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZygnTG9hZGVkIGhpc3RvcnkgZmlsZXM6JywgT2JqZWN0LmtleXMoaGlzdG9yeURhdGEpKTtcclxuICAgICAgICBzZXRIaXN0b3J5RmlsZXMoaGlzdG9yeURhdGEpO1xyXG4gICAgICAgIHNldE1ldGFkYXRhKGxvYWRlZE1ldGFkYXRhKTtcclxuXHJcbiAgICAgICAgY29uc3QgZm9ybWF0ID0gbmF2aWdhdG9yLmdwdS5nZXRQcmVmZXJyZWRDYW52YXNGb3JtYXQoKTtcclxuICAgICAgICBhd2FpdCBjdHguY3JlYXRlUmVuZGVyUGlwZWxpbmUoZm9ybWF0KTtcclxuXHJcbiAgICAgICAgc2V0R3B1Q29udGV4dChjdHgpO1xyXG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0luaXRpYWxpemF0aW9uIGVycm9yOicsIGVycik7XHJcbiAgICAgICAgc2V0RXJyb3IoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyk7XHJcbiAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKTtcclxuICB9LCBbXSk7XHJcblxyXG4gIC8vIFVwZGF0ZSBtYXAgY29sb3JzIHdoZW4geWVhciBjaGFuZ2VzXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICghZ3B1Q29udGV4dCB8fCAhbWV0YWRhdGEgfHwgT2JqZWN0LmtleXMoaGlzdG9yeUZpbGVzKS5sZW5ndGggPT09IDApIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBzZWFQcm92aW5jZXMgPSBuZXcgU2V0KG1ldGFkYXRhLnNlYVByb3ZpbmNlcyB8fCBbXSk7XHJcbiAgICBjb25zdCBkZWZhdWx0TGFuZENvbG9yID0gcGFja0NvbG9yKDk0LCA5NCwgOTQpO1xyXG4gICAgY29uc3Qgc2VhQ29sb3IgPSBwYWNrQ29sb3IoNjgsIDEwNywgMTYzKTtcclxuXHJcbiAgICBjb25zdCBwcmltYXJ5Q29sb3JzID0gbmV3IFVpbnQzMkFycmF5KG1ldGFkYXRhLnByb3ZpbmNlQ291bnQpO1xyXG4gICAgY29uc3Qgb3duZXJDb2xvcnMgPSBuZXcgVWludDMyQXJyYXkobWV0YWRhdGEucHJvdmluY2VDb3VudCk7XHJcbiAgICBjb25zdCBzZWNvbmRhcnlDb2xvcnMgPSBuZXcgVWludDMyQXJyYXkobWV0YWRhdGEucHJvdmluY2VDb3VudCk7XHJcblxyXG4gICAgLy8gSW5pdGlhbGl6ZSBhbGwgcHJvdmluY2VzXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1ldGFkYXRhLnByb3ZpbmNlQ291bnQ7IGkrKykge1xyXG4gICAgICBpZiAoc2VhUHJvdmluY2VzLmhhcyhpKSkge1xyXG4gICAgICAgIHByaW1hcnlDb2xvcnNbaV0gPSBzZWFDb2xvcjtcclxuICAgICAgICBvd25lckNvbG9yc1tpXSA9IHNlYUNvbG9yO1xyXG4gICAgICAgIHNlY29uZGFyeUNvbG9yc1tpXSA9IDA7IC8vIE5vIHN0cmlwZXMgZm9yIHNlYVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHByaW1hcnlDb2xvcnNbaV0gPSBkZWZhdWx0TGFuZENvbG9yO1xyXG4gICAgICAgIG93bmVyQ29sb3JzW2ldID0gZGVmYXVsdExhbmRDb2xvcjtcclxuICAgICAgICBzZWNvbmRhcnlDb2xvcnNbaV0gPSAwO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQXBwbHkgaGlzdG9yaWNhbCBkYXRhIGZvciBlYWNoIGNvdW50cnlcclxuICAgIGNvbnN0IHllYXJTdHIgPSBTdHJpbmcoeWVhcik7XHJcbiAgICBwcm92aW5jZVRvVGFnTWFwLmN1cnJlbnQuY2xlYXIoKTtcclxuICAgIGZvciAoY29uc3QgW3RhZywgaGlzdG9yeV0gb2YgT2JqZWN0LmVudHJpZXMoaGlzdG9yeUZpbGVzKSkge1xyXG4gICAgICBjb25zdCB5ZWFyRGF0YSA9IGhpc3RvcnlbeWVhclN0cl0gYXMgUHJvdmluY2VIaXN0b3J5RW50cnlbXSB8IHVuZGVmaW5lZDtcclxuICAgICAgaWYgKCF5ZWFyRGF0YSB8fCAhQXJyYXkuaXNBcnJheSh5ZWFyRGF0YSkpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgY29uc3QgdGFnQ29sb3IgPSBnZXRUYWdDb2xvcih0YWcsIG1ldGFkYXRhKTtcclxuXHJcbiAgICAgIGZvciAoY29uc3QgcHJvdmluY2Ugb2YgeWVhckRhdGEpIHtcclxuICAgICAgICBjb25zdCBwcm92SWQgPSBwcm92aW5jZS5JRDtcclxuICAgICAgICBpZiAocHJvdklkID49IG1ldGFkYXRhLnByb3ZpbmNlQ291bnQgfHwgc2VhUHJvdmluY2VzLmhhcyhwcm92SWQpKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgLy8gTWFwIHByb3ZpbmNlIHRvIGl0cyBvd25pbmcgdGFnXHJcbiAgICAgICAgcHJvdmluY2VUb1RhZ01hcC5jdXJyZW50LnNldChwcm92SWQsIHRhZyk7XHJcblxyXG4gICAgICAgIC8vIFNldCBwcm92aW5jZSBjb2xvciB0byB0YWcncyBjb2xvclxyXG4gICAgICAgIHByaW1hcnlDb2xvcnNbcHJvdklkXSA9IHRhZ0NvbG9yO1xyXG4gICAgICAgIG93bmVyQ29sb3JzW3Byb3ZJZF0gPSB0YWdDb2xvcjtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlIG9jY3VwYXRpb25cclxuICAgICAgICBpZiAocHJvdmluY2UuQ09OVFJPTCAmJiBwcm92aW5jZS5DT05UUk9MICE9PSAnJykge1xyXG4gICAgICAgICAgLy8gUHJvdmluY2UgaXMgb2NjdXBpZWQgLSBzaG93IHN0cmlwZXMgd2l0aCBvY2N1cGllcidzIGNvbG9yXHJcbiAgICAgICAgICBjb25zdCBvY2N1cGllckNvbG9yID0gZ2V0VGFnQ29sb3IocHJvdmluY2UuQ09OVFJPTCwgbWV0YWRhdGEpO1xyXG4gICAgICAgICAgc2Vjb25kYXJ5Q29sb3JzW3Byb3ZJZF0gPSBvY2N1cGllckNvbG9yO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzZWNvbmRhcnlDb2xvcnNbcHJvdklkXSA9IDA7IC8vIE5vIG9jY3VwYXRpb24sIG5vIHN0cmlwZXNcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBncHVDb250ZXh0LnVwZGF0ZVByb3ZpbmNlQ29sb3JzKHByaW1hcnlDb2xvcnMpO1xyXG4gICAgZ3B1Q29udGV4dC51cGRhdGVPd25lckNvbG9ycyhvd25lckNvbG9ycyk7XHJcbiAgICBncHVDb250ZXh0LnVwZGF0ZVNlY29uZGFyeUNvbG9ycyhzZWNvbmRhcnlDb2xvcnMpO1xyXG4gICAgY29uc29sZS5sb2coYE1hcCB1cGRhdGVkIGZvciB5ZWFyICR7eWVhcn1gKTtcclxuICB9LCBbeWVhciwgZ3B1Q29udGV4dCwgbWV0YWRhdGEsIGhpc3RvcnlGaWxlcywgZ2V0VGFnQ29sb3JdKTtcclxuXHJcbiAgLy8gQ29uZmlndXJlIGNhbnZhcyBhbmQgaGFuZGxlIHJlc2l6ZVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWdwdUNvbnRleHQgfHwgIWNhbnZhc1JlZi5jdXJyZW50IHx8ICFjb250YWluZXJSZWYuY3VycmVudCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IHVwZGF0ZVNpemUgPSAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGNvbnRhaW5lclJlZi5jdXJyZW50ITtcclxuICAgICAgY29uc3Qgd2lkdGggPSBjb250YWluZXIuY2xpZW50V2lkdGg7XHJcbiAgICAgIGNvbnN0IGhlaWdodCA9IGNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XHJcbiAgICAgIFxyXG4gICAgICBzZXRDYW52YXNTaXplKHsgd2lkdGgsIGhlaWdodCB9KTtcclxuICAgICAgdmlld3BvcnQuY3VycmVudC5yZXNpemUod2lkdGgsIGhlaWdodCk7XHJcbiAgICAgIHZpZXdwb3J0LmN1cnJlbnQuZml0VG9TY3JlZW4oKTtcclxuICAgICAgZ3B1Q29udGV4dC5jb25maWd1cmVDYW52YXMoY2FudmFzUmVmLmN1cnJlbnQhLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgY29uc29sZS5sb2coYENhbnZhcyBjb25maWd1cmVkOiAke3dpZHRofXgke2hlaWdodH1gKTtcclxuICAgIH07XHJcblxyXG4gICAgdXBkYXRlU2l6ZSgpO1xyXG5cclxuICAgIGNvbnN0IHJlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKHVwZGF0ZVNpemUpO1xyXG4gICAgcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZShjb250YWluZXJSZWYuY3VycmVudCk7XHJcblxyXG4gICAgcmV0dXJuICgpID0+IHJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuICB9LCBbZ3B1Q29udGV4dF0pO1xyXG5cclxuXHJcbiAgLy8gUmVuZGVyIGxvb3BcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCFncHVDb250ZXh0IHx8ICFjYW52YXNSZWYuY3VycmVudCkgcmV0dXJuO1xyXG5cclxuICAgIGxldCBmcmFtZUlkOiBudW1iZXI7XHJcblxyXG4gICAgZnVuY3Rpb24gYW5pbWF0ZSgpIHtcclxuICAgICAgLy8gVXBkYXRlIEdQVSB3aXRoIGN1cnJlbnQgdmlld3BvcnRcclxuICAgICAgY29uc3QgdW5pZm9ybXMgPSB2aWV3cG9ydC5jdXJyZW50LmdldFVuaWZvcm1zKCk7XHJcbiAgICAgIGdwdUNvbnRleHQhLnVwZGF0ZVVuaWZvcm1zKHtcclxuICAgICAgICB4OiB1bmlmb3Jtcy52aWV3X3gsXHJcbiAgICAgICAgeTogdW5pZm9ybXMudmlld195LFxyXG4gICAgICAgIHdpZHRoOiB1bmlmb3Jtcy52aWV3X3dpZHRoLFxyXG4gICAgICAgIGhlaWdodDogdW5pZm9ybXMudmlld19oZWlnaHQsXHJcbiAgICAgICAgem9vbTogdW5pZm9ybXMuem9vbV9sZXZlbCxcclxuICAgICAgfSk7XHJcbiAgICAgIGdwdUNvbnRleHQhLnJlbmRlcigpO1xyXG4gICAgICBmcmFtZUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyByZW5kZXIgbG9vcC4uLicpO1xyXG4gICAgYW5pbWF0ZSgpO1xyXG5cclxuICAgIHJldHVybiAoKSA9PiBjYW5jZWxBbmltYXRpb25GcmFtZShmcmFtZUlkKTtcclxuICB9LCBbZ3B1Q29udGV4dF0pO1xyXG5cclxuICAvLyBNb3VzZS93aGVlbCBldmVudCBoYW5kbGVyc1xyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDtcclxuICAgIGlmICghY2FudmFzIHx8IGlzTG9hZGluZykgcmV0dXJuO1xyXG5cclxuICAgIGxldCBtb3VzZURvd25Qb3M6IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0IG9uTW91c2VEb3duID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgaWYgKGUuYnV0dG9uID09PSAwKSB7IC8vIExlZnQgY2xpY2sgb25seVxyXG4gICAgICAgIGlzRHJhZ2dpbmcuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgICAgIG1vdXNlRG93blBvcyA9IHsgeDogZS5jbGllbnRYLCB5OiBlLmNsaWVudFkgfTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBvbk1vdXNlVXAgPSAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICBpZiAoZS5idXR0b24gPT09IDAgJiYgbW91c2VEb3duUG9zKSB7XHJcbiAgICAgICAgY29uc3QgZHJhZ0Rpc3RhbmNlID0gTWF0aC5zcXJ0KFxyXG4gICAgICAgICAgTWF0aC5wb3coZS5jbGllbnRYIC0gbW91c2VEb3duUG9zLngsIDIpICsgXHJcbiAgICAgICAgICBNYXRoLnBvdyhlLmNsaWVudFkgLSBtb3VzZURvd25Qb3MueSwgMilcclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIE9ubHkgdHJlYXQgYXMgY2xpY2sgaWYgZHJhZyBkaXN0YW5jZSBpcyB2ZXJ5IHNtYWxsICg8IDUgcGl4ZWxzKVxyXG4gICAgICAgIGlmIChkcmFnRGlzdGFuY2UgPCA1ICYmIG9uUHJvdmluY2VTZWxlY3QgJiYgcHJvdmluY2VUZXh0dXJlRGF0YS5jdXJyZW50ICYmIG1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAvLyBDbGljayB3aXRob3V0IGRyYWcgLSBzZWxlY3QgcHJvdmluY2VcclxuICAgICAgICAgIGNvbnN0IHJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICBjb25zdCBjYW52YXNYID0gZS5jbGllbnRYIC0gcmVjdC5sZWZ0O1xyXG4gICAgICAgICAgY29uc3QgY2FudmFzWSA9IGUuY2xpZW50WSAtIHJlY3QudG9wO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBDb252ZXJ0IGNhbnZhcyBjb29yZGluYXRlcyB0byBtYXAgY29vcmRpbmF0ZXMgdXNpbmcgdmlld3BvcnRcclxuICAgICAgICAgIGNvbnN0IG1hcENvb3JkcyA9IHZpZXdwb3J0LmN1cnJlbnQuc2NyZWVuVG9NYXAoY2FudmFzWCwgY2FudmFzWSk7XHJcbiAgICAgICAgICBjb25zdCBtYXBYID0gTWF0aC5mbG9vcihtYXBDb29yZHMueCk7XHJcbiAgICAgICAgICBjb25zdCBtYXBZID0gTWF0aC5mbG9vcihtYXBDb29yZHMueSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIEdldCBwcm92aW5jZSBJRCBmcm9tIHRleHR1cmUgZGF0YVxyXG4gICAgICAgICAgY29uc3QgdG90YWxXaWR0aCA9IG1ldGFkYXRhLndlc3RXaWR0aCAqIDI7XHJcbiAgICAgICAgICBpZiAobWFwWCA+PSAwICYmIG1hcFggPCB0b3RhbFdpZHRoICYmIG1hcFkgPj0gMCAmJiBtYXBZIDwgbWV0YWRhdGEuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gbWFwWSAqIHRvdGFsV2lkdGggKyBtYXBYO1xyXG4gICAgICAgICAgICBjb25zdCBwcm92aW5jZUlkID0gcHJvdmluY2VUZXh0dXJlRGF0YS5jdXJyZW50W2luZGV4XTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRhZyB0aGF0IG93bnMgdGhpcyBwcm92aW5jZVxyXG4gICAgICAgICAgICBjb25zdCBvd25pbmdUYWcgPSBwcm92aW5jZVRvVGFnTWFwLmN1cnJlbnQuZ2V0KHByb3ZpbmNlSWQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgQ2xpY2tlZCBwcm92aW5jZSAke3Byb3ZpbmNlSWR9LCBvd25lZCBieTogJHtvd25pbmdUYWcgfHwgJ25vbmUnfWApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgc2VsZWN0aW9uIGlmIHRoZSBwcm92aW5jZSBpcyBvd25lZCBieSBhIHRhZ1xyXG4gICAgICAgICAgICBpZiAob3duaW5nVGFnKSB7XHJcbiAgICAgICAgICAgICAgb25Qcm92aW5jZVNlbGVjdChvd25pbmdUYWcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlzRHJhZ2dpbmcuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgICAgIG1vdXNlRG93blBvcyA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3Qgb25Nb3VzZU1vdmUgPSAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICBpZiAobW91c2VEb3duUG9zKSB7XHJcbiAgICAgICAgY29uc3QgZHJhZ0Rpc3RhbmNlID0gTWF0aC5zcXJ0KFxyXG4gICAgICAgICAgTWF0aC5wb3coZS5jbGllbnRYIC0gbW91c2VEb3duUG9zLngsIDIpICsgXHJcbiAgICAgICAgICBNYXRoLnBvdyhlLmNsaWVudFkgLSBtb3VzZURvd25Qb3MueSwgMilcclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChkcmFnRGlzdGFuY2UgPiA1ICYmICFpc0RyYWdnaW5nLmN1cnJlbnQpIHtcclxuICAgICAgICAgIGlzRHJhZ2dpbmcuY3VycmVudCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChpc0RyYWdnaW5nLmN1cnJlbnQpIHtcclxuICAgICAgICAgIHZpZXdwb3J0LmN1cnJlbnQucGFuKC1lLm1vdmVtZW50WCwgLWUubW92ZW1lbnRZKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG5cclxuICAgIGNvbnN0IG9uV2hlZWwgPSAoZTogV2hlZWxFdmVudCkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IHpvb21EZWx0YSA9IGUuZGVsdGFZID4gMCA/IDAuOSA6IDEuMTtcclxuICAgICAgdmlld3BvcnQuY3VycmVudC56b29tQXQoZS5vZmZzZXRYLCBlLm9mZnNldFksIHpvb21EZWx0YSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbk1vdXNlRG93bik7XHJcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uTW91c2VVcCk7XHJcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIG9uTW91c2VVcCk7XHJcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xyXG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgb25XaGVlbCwgeyBwYXNzaXZlOiBmYWxzZSB9KTtcclxuXHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Nb3VzZURvd24pO1xyXG4gICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uTW91c2VVcCk7XHJcbiAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgb25Nb3VzZVVwKTtcclxuICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uTW91c2VNb3ZlKTtcclxuICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgb25XaGVlbCk7XHJcbiAgICB9O1xyXG4gIH0sIFtpc0xvYWRpbmcsIG9uUHJvdmluY2VTZWxlY3QsIG1ldGFkYXRhXSk7XHJcblxyXG4gIFxyXG4gIGlmIChlcnJvcikge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB3LWZ1bGwgaC1mdWxsIGJnLXJlZC05NTAgdGV4dC1yZWQtMjAwXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1ib2xkIG1iLTJcIj5XZWJHUFUgRXJyb3I8L2gyPlxyXG4gICAgICAgICAgPHA+e2Vycm9yfTwvcD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB3LWZ1bGwgaC1mdWxsIGJnLWdyYXktOTAwIHRleHQtZ3JheS0yMDBcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC0xMiB3LTEyIGJvcmRlci1iLTIgYm9yZGVyLXdoaXRlIG14LWF1dG8gbWItNFwiIC8+XHJcbiAgICAgICAgICA8cD5Mb2FkaW5nIG1hcC4uLjwvcD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgcmVmPXtjb250YWluZXJSZWZ9IGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgb3ZlcmZsb3ctaGlkZGVuIGJnLWJsYWNrXCI+XHJcbiAgICAgIDxjYW52YXNcclxuICAgICAgICByZWY9e2NhbnZhc1JlZn1cclxuICAgICAgICB3aWR0aD17Y2FudmFzU2l6ZS53aWR0aH1cclxuICAgICAgICBoZWlnaHQ9e2NhbnZhc1NpemUuaGVpZ2h0fVxyXG4gICAgICAgIGNsYXNzTmFtZT1cImJsb2NrIGJnLWJsYWNrXCJcclxuICAgICAgLz5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn0iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlU3RhdGUiLCJ1c2VDYWxsYmFjayIsIk1hcEdwdUNvbnRleHQiLCJNYXBWaWV3cG9ydCIsInBhY2tDb2xvciIsInIiLCJnIiwiYiIsImhleFRvUmdiIiwiaGV4IiwicmVzdWx0IiwiZXhlYyIsInBhcnNlSW50IiwiTWFwQ2FudmFzIiwieWVhciIsIm9uUHJvdmluY2VTZWxlY3QiLCJjYW52YXNSZWYiLCJjb250YWluZXJSZWYiLCJncHVDb250ZXh0Iiwic2V0R3B1Q29udGV4dCIsIm1ldGFkYXRhIiwic2V0TWV0YWRhdGEiLCJoaXN0b3J5RmlsZXMiLCJzZXRIaXN0b3J5RmlsZXMiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJlcnJvciIsInNldEVycm9yIiwiY2FudmFzU2l6ZSIsInNldENhbnZhc1NpemUiLCJ3aWR0aCIsImhlaWdodCIsInZpZXdwb3J0IiwiaXNEcmFnZ2luZyIsInByb3ZpbmNlVGV4dHVyZURhdGEiLCJwcm92aW5jZVRvVGFnTWFwIiwiTWFwIiwiZ2V0VGFnQ29sb3IiLCJ0YWciLCJtZXRhIiwidGFncyIsImNvbG9yIiwiaW5pdCIsImN0eCIsImNyZWF0ZSIsImNvbnNvbGUiLCJsb2ciLCJ3ZXN0UmVzIiwiZWFzdFJlcyIsIm1ldGFSZXMiLCJQcm9taXNlIiwiYWxsIiwiZmV0Y2giLCJ3ZXN0RGF0YSIsIlVpbnQxNkFycmF5IiwiYXJyYXlCdWZmZXIiLCJlYXN0RGF0YSIsImxvYWRlZE1ldGFkYXRhIiwianNvbiIsImxvYWRNYXBUZXh0dXJlcyIsIndlc3RXaWR0aCIsInRvdGFsV2lkdGgiLCJ0b3RhbEhlaWdodCIsImNvbWJpbmVkRGF0YSIsInkiLCJzcmNPZmZzZXQiLCJkc3RPZmZzZXQiLCJzZXQiLCJzdWJhcnJheSIsImN1cnJlbnQiLCJjcmVhdGVVbmlmb3JtQnVmZmVyIiwicHJvdmluY2VDb3VudCIsImNyZWF0ZUNvbG9yQnVmZmVycyIsImhpc3RvcnlEYXRhIiwidGFnTmFtZXMiLCJPYmplY3QiLCJrZXlzIiwiaGlzdG9yeVByb21pc2VzIiwibWFwIiwicmVzIiwib2siLCJkYXRhIiwicmVzdWx0cyIsImZvcm1hdCIsIm5hdmlnYXRvciIsImdwdSIsImdldFByZWZlcnJlZENhbnZhc0Zvcm1hdCIsImNyZWF0ZVJlbmRlclBpcGVsaW5lIiwiZXJyIiwiRXJyb3IiLCJtZXNzYWdlIiwibGVuZ3RoIiwic2VhUHJvdmluY2VzIiwiU2V0IiwiZGVmYXVsdExhbmRDb2xvciIsInNlYUNvbG9yIiwicHJpbWFyeUNvbG9ycyIsIlVpbnQzMkFycmF5Iiwib3duZXJDb2xvcnMiLCJzZWNvbmRhcnlDb2xvcnMiLCJpIiwiaGFzIiwieWVhclN0ciIsIlN0cmluZyIsImNsZWFyIiwiaGlzdG9yeSIsImVudHJpZXMiLCJ5ZWFyRGF0YSIsIkFycmF5IiwiaXNBcnJheSIsInRhZ0NvbG9yIiwicHJvdmluY2UiLCJwcm92SWQiLCJJRCIsIkNPTlRST0wiLCJvY2N1cGllckNvbG9yIiwidXBkYXRlUHJvdmluY2VDb2xvcnMiLCJ1cGRhdGVPd25lckNvbG9ycyIsInVwZGF0ZVNlY29uZGFyeUNvbG9ycyIsInVwZGF0ZVNpemUiLCJjb250YWluZXIiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsInJlc2l6ZSIsImZpdFRvU2NyZWVuIiwiY29uZmlndXJlQ2FudmFzIiwicmVzaXplT2JzZXJ2ZXIiLCJSZXNpemVPYnNlcnZlciIsIm9ic2VydmUiLCJkaXNjb25uZWN0IiwiZnJhbWVJZCIsImFuaW1hdGUiLCJ1bmlmb3JtcyIsImdldFVuaWZvcm1zIiwidXBkYXRlVW5pZm9ybXMiLCJ4Iiwidmlld194Iiwidmlld195Iiwidmlld193aWR0aCIsInZpZXdfaGVpZ2h0Iiwiem9vbSIsInpvb21fbGV2ZWwiLCJyZW5kZXIiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsImNhbnZhcyIsIm1vdXNlRG93blBvcyIsIm9uTW91c2VEb3duIiwiZSIsImJ1dHRvbiIsImNsaWVudFgiLCJjbGllbnRZIiwib25Nb3VzZVVwIiwiZHJhZ0Rpc3RhbmNlIiwiTWF0aCIsInNxcnQiLCJwb3ciLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY2FudmFzWCIsImxlZnQiLCJjYW52YXNZIiwidG9wIiwibWFwQ29vcmRzIiwic2NyZWVuVG9NYXAiLCJtYXBYIiwiZmxvb3IiLCJtYXBZIiwiaW5kZXgiLCJwcm92aW5jZUlkIiwib3duaW5nVGFnIiwiZ2V0Iiwib25Nb3VzZU1vdmUiLCJwYW4iLCJtb3ZlbWVudFgiLCJtb3ZlbWVudFkiLCJvbldoZWVsIiwicHJldmVudERlZmF1bHQiLCJ6b29tRGVsdGEiLCJkZWx0YVkiLCJ6b29tQXQiLCJvZmZzZXRYIiwib2Zmc2V0WSIsImFkZEV2ZW50TGlzdGVuZXIiLCJwYXNzaXZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRpdiIsImNsYXNzTmFtZSIsImgyIiwicCIsInJlZiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/MapCanvas.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/components/YearSlider.tsx":
/*!***************************************!*\
  !*** ./src/components/YearSlider.tsx ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ YearSlider)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\nfunction YearSlider(param) {\n    let { min = 2, max = 2000, initialValue = 2, onChange } = param;\n    _s();\n    const [year, setYear] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialValue);\n    const [isDragging, setIsDragging] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const trackRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const updateYear = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"YearSlider.useCallback[updateYear]\": (clientX)=>{\n            if (!trackRef.current) return;\n            const rect = trackRef.current.getBoundingClientRect();\n            const percent = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width));\n            const newYear = Math.round(min + percent * (max - min));\n            setYear(newYear);\n            onChange(newYear);\n        }\n    }[\"YearSlider.useCallback[updateYear]\"], [\n        min,\n        max,\n        onChange\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"YearSlider.useEffect\": ()=>{\n            if (!isDragging) return;\n            const handleMouseMove = {\n                \"YearSlider.useEffect.handleMouseMove\": (e)=>{\n                    e.preventDefault();\n                    updateYear(e.clientX);\n                }\n            }[\"YearSlider.useEffect.handleMouseMove\"];\n            const handleMouseUp = {\n                \"YearSlider.useEffect.handleMouseUp\": ()=>{\n                    setIsDragging(false);\n                }\n            }[\"YearSlider.useEffect.handleMouseUp\"];\n            document.addEventListener('mousemove', handleMouseMove);\n            document.addEventListener('mouseup', handleMouseUp);\n            return ({\n                \"YearSlider.useEffect\": ()=>{\n                    document.removeEventListener('mousemove', handleMouseMove);\n                    document.removeEventListener('mouseup', handleMouseUp);\n                }\n            })[\"YearSlider.useEffect\"];\n        }\n    }[\"YearSlider.useEffect\"], [\n        isDragging,\n        updateYear\n    ]);\n    const handleMouseDown = (e)=>{\n        e.preventDefault();\n        setIsDragging(true);\n        updateYear(e.clientX);\n    };\n    const percent = (year - min) / (max - min) * 100;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"absolute top-0 left-1/2 w-2/3 -translate-x-1/2 z-50 select-none pointer-events-auto px-4 pt-8\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"relative bg-[#1a1a24] border-2 border-[#2a2a3a] p-2 shadow-[0_2px_0_#0a0a10]\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"absolute left-1/2 -translate-x-1/2 bottom-full w-16 bg-[#1a1a24] border-2 border-b-0 border-[#2a2a3a] px-2 py-1 flex justify-center\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"text-amber-400 font-bold text-xl tracking-wide leading-none whitespace-nowrap drop-shadow-[1px_1px_0_#000]\",\n                        children: year\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\YearSlider.tsx\",\n                        lineNumber: 69,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\YearSlider.tsx\",\n                    lineNumber: 68,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    ref: trackRef,\n                    className: \"cursor-pointer relative h-2 bg-pixel-track border-[3px] border-pixel-dark shadow-[inset_0_0_0_2px_#4a4a6a]\",\n                    onMouseDown: handleMouseDown,\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"absolute top-0 left-0 h-full bg-pixel-amber\",\n                            style: {\n                                width: \"\".concat(percent, \"%\")\n                            }\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\YearSlider.tsx\",\n                            lineNumber: 81,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"absolute top-1/2 -translate-x-1/2 -translate-y-1/2 cursor-grab w-3 h-4 bg-pixel-knob border-[3px] border-pixel-dark pointer-events-auto\",\n                            style: {\n                                left: \"\".concat(percent, \"%\")\n                            },\n                            onMouseDown: handleMouseDown\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\YearSlider.tsx\",\n                            lineNumber: 87,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\YearSlider.tsx\",\n                    lineNumber: 75,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\YearSlider.tsx\",\n            lineNumber: 66,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\Yiming Su\\\\Desktop\\\\repos\\\\roman-story\\\\frontend\\\\src\\\\components\\\\YearSlider.tsx\",\n        lineNumber: 64,\n        columnNumber: 5\n    }, this);\n}\n_s(YearSlider, \"DYX2AHG4g13s6ThPaGCDo5YHzK0=\");\n_c = YearSlider;\nvar _c;\n$RefreshReg$(_c, \"YearSlider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL1llYXJTbGlkZXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUVpRTtBQVNsRCxTQUFTSSxXQUFXLEtBS2pCO1FBTGlCLEVBQ2pDQyxNQUFNLENBQUMsRUFDUEMsTUFBTSxJQUFJLEVBQ1ZDLGVBQWUsQ0FBQyxFQUNoQkMsUUFBUSxFQUNRLEdBTGlCOztJQU1qQyxNQUFNLENBQUNDLE1BQU1DLFFBQVEsR0FBR1YsK0NBQVFBLENBQUNPO0lBQ2pDLE1BQU0sQ0FBQ0ksWUFBWUMsY0FBYyxHQUFHWiwrQ0FBUUEsQ0FBQztJQUM3QyxNQUFNYSxXQUFXWiw2Q0FBTUEsQ0FBaUI7SUFFeEMsTUFBTWEsYUFBYVgsa0RBQVdBOzhDQUM1QixDQUFDWTtZQUNDLElBQUksQ0FBQ0YsU0FBU0csT0FBTyxFQUFFO1lBQ3ZCLE1BQU1DLE9BQU9KLFNBQVNHLE9BQU8sQ0FBQ0UscUJBQXFCO1lBQ25ELE1BQU1DLFVBQVVDLEtBQUtkLEdBQUcsQ0FBQyxHQUFHYyxLQUFLZixHQUFHLENBQUMsR0FBRyxDQUFDVSxVQUFVRSxLQUFLSSxJQUFJLElBQUlKLEtBQUtLLEtBQUs7WUFDMUUsTUFBTUMsVUFBVUgsS0FBS0ksS0FBSyxDQUFDbkIsTUFBTWMsVUFBV2IsQ0FBQUEsTUFBTUQsR0FBRTtZQUNwREssUUFBUWE7WUFDUmYsU0FBU2U7UUFDWDs2Q0FDQTtRQUFDbEI7UUFBS0M7UUFBS0U7S0FBUztJQUd0Qk4sZ0RBQVNBO2dDQUFDO1lBQ1IsSUFBSSxDQUFDUyxZQUFZO1lBRWpCLE1BQU1jO3dEQUFrQixDQUFDQztvQkFDdkJBLEVBQUVDLGNBQWM7b0JBQ2hCYixXQUFXWSxFQUFFWCxPQUFPO2dCQUN0Qjs7WUFFQSxNQUFNYTtzREFBZ0I7b0JBQ3BCaEIsY0FBYztnQkFDaEI7O1lBRUFpQixTQUFTQyxnQkFBZ0IsQ0FBQyxhQUFhTDtZQUN2Q0ksU0FBU0MsZ0JBQWdCLENBQUMsV0FBV0Y7WUFFckM7d0NBQU87b0JBQ0xDLFNBQVNFLG1CQUFtQixDQUFDLGFBQWFOO29CQUMxQ0ksU0FBU0UsbUJBQW1CLENBQUMsV0FBV0g7Z0JBQzFDOztRQUNGOytCQUFHO1FBQUNqQjtRQUFZRztLQUFXO0lBRTNCLE1BQU1rQixrQkFBa0IsQ0FBQ047UUFDdkJBLEVBQUVDLGNBQWM7UUFDaEJmLGNBQWM7UUFDZEUsV0FBV1ksRUFBRVgsT0FBTztJQUN0QjtJQUVBLE1BQU1JLFVBQVUsQ0FBRVYsT0FBT0osR0FBRSxJQUFNQyxDQUFBQSxNQUFNRCxHQUFFLElBQU07SUFFL0MscUJBQ0UsOERBQUM0QjtRQUFJQyxXQUFVO2tCQUViLDRFQUFDRDtZQUFJQyxXQUFVOzs4QkFFYiw4REFBQ0Q7b0JBQUlDLFdBQVU7OEJBQ2IsNEVBQUNDO3dCQUFLRCxXQUFVO2tDQUNiekI7Ozs7Ozs7Ozs7OzhCQUtMLDhEQUFDd0I7b0JBQ0NHLEtBQUt2QjtvQkFDTHFCLFdBQVU7b0JBQ1ZHLGFBQWFMOztzQ0FHYiw4REFBQ0M7NEJBQ0NDLFdBQVU7NEJBQ1ZJLE9BQU87Z0NBQUVoQixPQUFPLEdBQVcsT0FBUkgsU0FBUTs0QkFBRzs7Ozs7O3NDQUloQyw4REFBQ2M7NEJBQ0NDLFdBQVU7NEJBQ1ZJLE9BQU87Z0NBQUVqQixNQUFNLEdBQVcsT0FBUkYsU0FBUTs0QkFBRzs0QkFDN0JrQixhQUFhTDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNekI7R0FwRndCNUI7S0FBQUEiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcWWltaW5nIFN1XFxEZXNrdG9wXFxyZXBvc1xccm9tYW4tc3RvcnlcXGZyb250ZW5kXFxzcmNcXGNvbXBvbmVudHNcXFllYXJTbGlkZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xyXG5cclxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZVJlZiwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcclxuXHJcbmludGVyZmFjZSBZZWFyU2xpZGVyUHJvcHMge1xyXG4gIG1pbj86IG51bWJlcjtcclxuICBtYXg/OiBudW1iZXI7XHJcbiAgaW5pdGlhbFZhbHVlPzogbnVtYmVyO1xyXG4gIG9uQ2hhbmdlOiAoeWVhcjogbnVtYmVyKSA9PiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBZZWFyU2xpZGVyKHtcclxuICBtaW4gPSAyLFxyXG4gIG1heCA9IDIwMDAsXHJcbiAgaW5pdGlhbFZhbHVlID0gMixcclxuICBvbkNoYW5nZSxcclxufTogWWVhclNsaWRlclByb3BzKSB7XHJcbiAgY29uc3QgW3llYXIsIHNldFllYXJdID0gdXNlU3RhdGUoaW5pdGlhbFZhbHVlKTtcclxuICBjb25zdCBbaXNEcmFnZ2luZywgc2V0SXNEcmFnZ2luZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgdHJhY2tSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xyXG5cclxuICBjb25zdCB1cGRhdGVZZWFyID0gdXNlQ2FsbGJhY2soXHJcbiAgICAoY2xpZW50WDogbnVtYmVyKSA9PiB7XHJcbiAgICAgIGlmICghdHJhY2tSZWYuY3VycmVudCkgcmV0dXJuO1xyXG4gICAgICBjb25zdCByZWN0ID0gdHJhY2tSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgY29uc3QgcGVyY2VudCA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIChjbGllbnRYIC0gcmVjdC5sZWZ0KSAvIHJlY3Qud2lkdGgpKTtcclxuICAgICAgY29uc3QgbmV3WWVhciA9IE1hdGgucm91bmQobWluICsgcGVyY2VudCAqIChtYXggLSBtaW4pKTtcclxuICAgICAgc2V0WWVhcihuZXdZZWFyKTtcclxuICAgICAgb25DaGFuZ2UobmV3WWVhcik7XHJcbiAgICB9LFxyXG4gICAgW21pbiwgbWF4LCBvbkNoYW5nZV1cclxuICApO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCFpc0RyYWdnaW5nKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgaGFuZGxlTW91c2VNb3ZlID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB1cGRhdGVZZWFyKGUuY2xpZW50WCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGhhbmRsZU1vdXNlVXAgPSAoKSA9PiB7XHJcbiAgICAgIHNldElzRHJhZ2dpbmcoZmFsc2UpO1xyXG4gICAgfTtcclxuXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBoYW5kbGVNb3VzZU1vdmUpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGhhbmRsZU1vdXNlVXApO1xyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlTW92ZSk7XHJcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBoYW5kbGVNb3VzZVVwKTtcclxuICAgIH07XHJcbiAgfSwgW2lzRHJhZ2dpbmcsIHVwZGF0ZVllYXJdKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlTW91c2VEb3duID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHNldElzRHJhZ2dpbmcodHJ1ZSk7XHJcbiAgICB1cGRhdGVZZWFyKGUuY2xpZW50WCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcGVyY2VudCA9ICgoeWVhciAtIG1pbikgLyAobWF4IC0gbWluKSkgKiAxMDA7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0wIGxlZnQtMS8yIHctMi8zIC10cmFuc2xhdGUteC0xLzIgei01MCBzZWxlY3Qtbm9uZSBwb2ludGVyLWV2ZW50cy1hdXRvIHB4LTQgcHQtOFwiPlxyXG4gICAgICB7LyogY29udGFpbmVyICovfVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIGJnLVsjMWExYTI0XSBib3JkZXItMiBib3JkZXItWyMyYTJhM2FdIHAtMiBzaGFkb3ctWzBfMnB4XzBfIzBhMGExMF1cIj5cclxuICAgICAgICB7LyogYW5uZXggKi99XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBsZWZ0LTEvMiAtdHJhbnNsYXRlLXgtMS8yIGJvdHRvbS1mdWxsIHctMTYgYmctWyMxYTFhMjRdIGJvcmRlci0yIGJvcmRlci1iLTAgYm9yZGVyLVsjMmEyYTNhXSBweC0yIHB5LTEgZmxleCBqdXN0aWZ5LWNlbnRlclwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1hbWJlci00MDAgZm9udC1ib2xkIHRleHQteGwgdHJhY2tpbmctd2lkZSBsZWFkaW5nLW5vbmUgd2hpdGVzcGFjZS1ub3dyYXAgZHJvcC1zaGFkb3ctWzFweF8xcHhfMF8jMDAwXVwiPlxyXG4gICAgICAgICAgICB7eWVhcn1cclxuICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICBcclxuICAgICAgICB7LyogVGhlIHRyYWNrICovfVxyXG4gICAgICAgIDxkaXZcclxuICAgICAgICAgIHJlZj17dHJhY2tSZWZ9XHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlciByZWxhdGl2ZSBoLTIgYmctcGl4ZWwtdHJhY2sgYm9yZGVyLVszcHhdIGJvcmRlci1waXhlbC1kYXJrIHNoYWRvdy1baW5zZXRfMF8wXzBfMnB4XyM0YTRhNmFdXCJcclxuICAgICAgICAgIG9uTW91c2VEb3duPXtoYW5kbGVNb3VzZURvd259XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgey8qIEZpbGxlZCBwb3J0aW9uICovfVxyXG4gICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMCBsZWZ0LTAgaC1mdWxsIGJnLXBpeGVsLWFtYmVyXCJcclxuICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAke3BlcmNlbnR9JWAgfX1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHsvKiBLbm9iICovfVxyXG4gICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMS8yIC10cmFuc2xhdGUteC0xLzIgLXRyYW5zbGF0ZS15LTEvMiBjdXJzb3ItZ3JhYiB3LTMgaC00IGJnLXBpeGVsLWtub2IgYm9yZGVyLVszcHhdIGJvcmRlci1waXhlbC1kYXJrIHBvaW50ZXItZXZlbnRzLWF1dG9cIlxyXG4gICAgICAgICAgICBzdHlsZT17eyBsZWZ0OiBgJHtwZXJjZW50fSVgIH19XHJcbiAgICAgICAgICAgIG9uTW91c2VEb3duPXtoYW5kbGVNb3VzZURvd259XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn1cclxuICAgICAgICAgICAgIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlUmVmIiwidXNlRWZmZWN0IiwidXNlQ2FsbGJhY2siLCJZZWFyU2xpZGVyIiwibWluIiwibWF4IiwiaW5pdGlhbFZhbHVlIiwib25DaGFuZ2UiLCJ5ZWFyIiwic2V0WWVhciIsImlzRHJhZ2dpbmciLCJzZXRJc0RyYWdnaW5nIiwidHJhY2tSZWYiLCJ1cGRhdGVZZWFyIiwiY2xpZW50WCIsImN1cnJlbnQiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicGVyY2VudCIsIk1hdGgiLCJsZWZ0Iiwid2lkdGgiLCJuZXdZZWFyIiwicm91bmQiLCJoYW5kbGVNb3VzZU1vdmUiLCJlIiwicHJldmVudERlZmF1bHQiLCJoYW5kbGVNb3VzZVVwIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZU1vdXNlRG93biIsImRpdiIsImNsYXNzTmFtZSIsInNwYW4iLCJyZWYiLCJvbk1vdXNlRG93biIsInN0eWxlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/YearSlider.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/lib/map-renderer/gpu-context.ts":
/*!*********************************************!*\
  !*** ./src/lib/map-renderer/gpu-context.ts ***!
  \*********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MapGpuContext: () => (/* binding */ MapGpuContext)\n/* harmony export */ });\nclass MapGpuContext {\n    static async create() {\n        const context = new MapGpuContext();\n        await context.init();\n        return context;\n    }\n    async init() {\n        if (!navigator.gpu) {\n            throw new Error('WebGPU not supported in this browser');\n        }\n        const adapter = await navigator.gpu.requestAdapter();\n        if (!adapter) {\n            throw new Error('Failed to get GPU adapter');\n        }\n        this.device = await adapter.requestDevice();\n        this.queue = this.device.queue;\n        console.log(' GPU initialized');\n    }\n    async loadMapTextures(westData, eastData, width, height) {\n        this.westTexture = this.device.createTexture({\n            size: {\n                width,\n                height\n            },\n            format: 'r16uint',\n            usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST\n        });\n        this.queue.writeTexture({\n            texture: this.westTexture\n        }, westData.buffer, {\n            bytesPerRow: width * 2\n        }, {\n            width,\n            height\n        });\n        this.eastTexture = this.device.createTexture({\n            size: {\n                width,\n                height\n            },\n            format: 'r16uint',\n            usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST\n        });\n        this.queue.writeTexture({\n            texture: this.eastTexture\n        }, eastData.buffer, {\n            bytesPerRow: width * 2\n        }, {\n            width,\n            height\n        });\n        console.log(\" Map textures uploaded (\".concat(width, \"x\").concat(height, \")\"));\n    }\n    createUniformBuffer(tileWidth, tileHeight) {\n        let maxProvinceId = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 8192;\n        this.tileWidth = tileWidth;\n        this.tileHeight = tileHeight;\n        this.maxProvinceId = maxProvinceId;\n        // Uniforms struct - needs 48 bytes + padding to 64\n        this.uniformsBuffer = this.device.createBuffer({\n            size: 64,\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST\n        });\n        console.log(\" Uniform buffer created (tile: \".concat(tileWidth, \"x\").concat(tileHeight, \", maxProvinceId: \").concat(maxProvinceId, \")\"));\n    }\n    createColorBuffers(provinceCount) {\n        // Create all 4 color/state buffers\n        this.primaryColorsBuffer = this.device.createBuffer({\n            size: provinceCount * 4,\n            usage: GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_DST\n        });\n        this.statesBuffer = this.device.createBuffer({\n            size: provinceCount * 4,\n            usage: GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_DST\n        });\n        this.ownerColorsBuffer = this.device.createBuffer({\n            size: provinceCount * 4,\n            usage: GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_DST\n        });\n        this.secondaryColorsBuffer = this.device.createBuffer({\n            size: provinceCount * 4,\n            usage: GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_DST\n        });\n        // Initialize with default values (gray)\n        const defaultColor = packColor(94, 94, 94);\n        const defaultPrimary = new Uint32Array(provinceCount).fill(defaultColor);\n        const defaultStates = new Uint32Array(provinceCount).fill(0);\n        const defaultOwner = new Uint32Array(provinceCount).fill(defaultColor);\n        const defaultSecondary = new Uint32Array(provinceCount).fill(0);\n        this.queue.writeBuffer(this.primaryColorsBuffer, 0, defaultPrimary.buffer);\n        this.queue.writeBuffer(this.statesBuffer, 0, defaultStates.buffer);\n        this.queue.writeBuffer(this.ownerColorsBuffer, 0, defaultOwner.buffer);\n        this.queue.writeBuffer(this.secondaryColorsBuffer, 0, defaultSecondary.buffer);\n        console.log(\" Color buffers created (\".concat(provinceCount, \" provinces)\"));\n    }\n    updateUniforms(viewport) {\n        const data = new ArrayBuffer(64);\n        const view = new DataView(data);\n        let offset = 0;\n        // struct ComputeUniforms (must match WGSL)\n        view.setUint32(offset, this.tileWidth, true);\n        offset += 4;\n        view.setUint32(offset, this.tileHeight, true);\n        offset += 4;\n        view.setUint32(offset, 1, true); // enable_location_borders\n        offset += 4;\n        view.setUint32(offset, 1, true); // enable_owner_borders\n        offset += 4;\n        view.setUint32(offset, Math.floor(viewport.x), true); // view_x\n        offset += 4;\n        view.setUint32(offset, Math.floor(viewport.y), true); // view_y\n        offset += 4;\n        view.setUint32(offset, Math.floor(viewport.width), true); // view_width\n        offset += 4;\n        view.setUint32(offset, Math.floor(viewport.height), true); // view_height\n        offset += 4;\n        view.setFloat32(offset, viewport.zoom, true); // zoom_level\n        offset += 4;\n        view.setUint32(offset, this.canvasWidth, true); // surface_width\n        offset += 4;\n        view.setUint32(offset, this.canvasHeight, true); // surface_height\n        offset += 4;\n        view.setUint32(offset, this.maxProvinceId, true); // max_province_id\n        this.queue.writeBuffer(this.uniformsBuffer, 0, data);\n    }\n    updateProvinceColors(colors) {\n        this.queue.writeBuffer(this.primaryColorsBuffer, 0, colors.buffer);\n    }\n    updateOwnerColors(colors) {\n        this.queue.writeBuffer(this.ownerColorsBuffer, 0, colors.buffer);\n    }\n    updateSecondaryColors(colors) {\n        this.queue.writeBuffer(this.secondaryColorsBuffer, 0, colors.buffer);\n    }\n    updateStates(states) {\n        this.queue.writeBuffer(this.statesBuffer, 0, states.buffer);\n    }\n    async createRenderPipeline(canvasFormat) {\n        const shaderCode = await fetch('/shaders/map.wgsl').then((r)=>r.text());\n        this.shaderModule = this.device.createShaderModule({\n            code: shaderCode\n        });\n        this.bindGroupLayout = this.device.createBindGroupLayout({\n            entries: [\n                {\n                    binding: 0,\n                    visibility: GPUShaderStage.FRAGMENT,\n                    texture: {\n                        sampleType: 'uint',\n                        viewDimension: '2d'\n                    }\n                },\n                {\n                    binding: 1,\n                    visibility: GPUShaderStage.FRAGMENT,\n                    texture: {\n                        sampleType: 'uint',\n                        viewDimension: '2d'\n                    }\n                },\n                {\n                    binding: 2,\n                    visibility: GPUShaderStage.FRAGMENT | GPUShaderStage.VERTEX,\n                    buffer: {\n                        type: 'uniform'\n                    }\n                },\n                {\n                    binding: 3,\n                    visibility: GPUShaderStage.FRAGMENT,\n                    buffer: {\n                        type: 'read-only-storage'\n                    }\n                },\n                {\n                    binding: 4,\n                    visibility: GPUShaderStage.FRAGMENT,\n                    buffer: {\n                        type: 'read-only-storage'\n                    }\n                },\n                {\n                    binding: 5,\n                    visibility: GPUShaderStage.FRAGMENT,\n                    buffer: {\n                        type: 'read-only-storage'\n                    }\n                },\n                {\n                    binding: 6,\n                    visibility: GPUShaderStage.FRAGMENT,\n                    buffer: {\n                        type: 'read-only-storage'\n                    }\n                }\n            ]\n        });\n        const pipelineLayout = this.device.createPipelineLayout({\n            bindGroupLayouts: [\n                this.bindGroupLayout\n            ]\n        });\n        this.pipeline = this.device.createRenderPipeline({\n            layout: pipelineLayout,\n            vertex: {\n                module: this.shaderModule,\n                entryPoint: 'vs_main'\n            },\n            fragment: {\n                module: this.shaderModule,\n                entryPoint: 'fs_main',\n                targets: [\n                    {\n                        format: canvasFormat\n                    }\n                ]\n            }\n        });\n        this.bindGroup = this.device.createBindGroup({\n            layout: this.bindGroupLayout,\n            entries: [\n                {\n                    binding: 0,\n                    resource: this.westTexture.createView()\n                },\n                {\n                    binding: 1,\n                    resource: this.eastTexture.createView()\n                },\n                {\n                    binding: 2,\n                    resource: {\n                        buffer: this.uniformsBuffer\n                    }\n                },\n                {\n                    binding: 3,\n                    resource: {\n                        buffer: this.primaryColorsBuffer\n                    }\n                },\n                {\n                    binding: 4,\n                    resource: {\n                        buffer: this.statesBuffer\n                    }\n                },\n                {\n                    binding: 5,\n                    resource: {\n                        buffer: this.ownerColorsBuffer\n                    }\n                },\n                {\n                    binding: 6,\n                    resource: {\n                        buffer: this.secondaryColorsBuffer\n                    }\n                }\n            ]\n        });\n        console.log(' Render pipeline created');\n    }\n    configureCanvas(canvas, width, height) {\n        this.canvasWidth = width;\n        this.canvasHeight = height;\n        this.canvasContext = canvas.getContext('webgpu');\n        if (!this.canvasContext) {\n            throw new Error('Failed to get WebGPU canvas context');\n        }\n        this.canvasContext.configure({\n            device: this.device,\n            format: navigator.gpu.getPreferredCanvasFormat()\n        });\n        console.log(\" Canvas configured: \".concat(width, \"x\").concat(height, \" physical pixels\"));\n    }\n    render() {\n        if (!this.canvasContext) {\n            throw new Error('Canvas not configured');\n        }\n        const texture = this.canvasContext.getCurrentTexture();\n        const view = texture.createView();\n        const encoder = this.device.createCommandEncoder();\n        const pass = encoder.beginRenderPass({\n            colorAttachments: [\n                {\n                    view: view,\n                    clearValue: {\n                        r: 0.05,\n                        g: 0.05,\n                        b: 0.05,\n                        a: 1\n                    },\n                    loadOp: 'clear',\n                    storeOp: 'store'\n                }\n            ]\n        });\n        pass.setPipeline(this.pipeline);\n        pass.setBindGroup(0, this.bindGroup);\n        pass.draw(3); // Draw fullscreen triangle\n        pass.end();\n        this.queue.submit([\n            encoder.finish()\n        ]);\n    }\n    constructor(){\n        this.tileWidth = 0;\n        this.tileHeight = 0;\n        this.canvasWidth = 1920;\n        this.canvasHeight = 1080;\n        this.maxProvinceId = 8192;\n    }\n}\n// Helper function - pack as 0x00RRGGBB to match shader unpack_color\nfunction packColor(r, g, b) {\n    return r << 16 | g << 8 | b;\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvbWFwLXJlbmRlcmVyL2dwdS1jb250ZXh0LnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxNQUFNQTtJQXFCWCxhQUFhQyxTQUFpQztRQUM1QyxNQUFNQyxVQUFVLElBQUlGO1FBQ3BCLE1BQU1FLFFBQVFDLElBQUk7UUFDbEIsT0FBT0Q7SUFDVDtJQUVBLE1BQWNDLE9BQU87UUFDbkIsSUFBSSxDQUFDQyxVQUFVQyxHQUFHLEVBQUU7WUFDbEIsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBRUEsTUFBTUMsVUFBVSxNQUFNSCxVQUFVQyxHQUFHLENBQUNHLGNBQWM7UUFDbEQsSUFBSSxDQUFDRCxTQUFTO1lBQ1osTUFBTSxJQUFJRCxNQUFNO1FBQ2xCO1FBRUEsSUFBSSxDQUFDRyxNQUFNLEdBQUcsTUFBTUYsUUFBUUcsYUFBYTtRQUN6QyxJQUFJLENBQUNDLEtBQUssR0FBRyxJQUFJLENBQUNGLE1BQU0sQ0FBQ0UsS0FBSztRQUU5QkMsUUFBUUMsR0FBRyxDQUFDO0lBQ2Q7SUFFQSxNQUFNQyxnQkFDSkMsUUFBcUIsRUFDckJDLFFBQXFCLEVBQ3JCQyxLQUFhLEVBQ2JDLE1BQWMsRUFDZDtRQUNBLElBQUksQ0FBQ0MsV0FBVyxHQUFHLElBQUksQ0FBQ1YsTUFBTSxDQUFDVyxhQUFhLENBQUM7WUFDM0NDLE1BQU07Z0JBQUVKO2dCQUFPQztZQUFPO1lBQ3RCSSxRQUFRO1lBQ1JDLE9BQU9DLGdCQUFnQkMsZUFBZSxHQUFHRCxnQkFBZ0JFLFFBQVE7UUFDbkU7UUFFQSxJQUFJLENBQUNmLEtBQUssQ0FBQ2dCLFlBQVksQ0FDckI7WUFBRUMsU0FBUyxJQUFJLENBQUNULFdBQVc7UUFBQyxHQUM1QkosU0FBU2MsTUFBTSxFQUNmO1lBQUVDLGFBQWFiLFFBQVE7UUFBRSxHQUN6QjtZQUFFQTtZQUFPQztRQUFPO1FBR2xCLElBQUksQ0FBQ2EsV0FBVyxHQUFHLElBQUksQ0FBQ3RCLE1BQU0sQ0FBQ1csYUFBYSxDQUFDO1lB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Q0FBUyxFQUFFQyxDQUFTO0lBQ2hELE9BQU8sS0FBTSxLQUFPRCxLQUFLLElBQUtDO0FBQ2hDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFlpbWluZyBTdVxcRGVza3RvcFxccmVwb3NcXHJvbWFuLXN0b3J5XFxmcm9udGVuZFxcc3JjXFxsaWJcXG1hcC1yZW5kZXJlclxcZ3B1LWNvbnRleHQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIE1hcEdwdUNvbnRleHQge1xyXG4gIHByaXZhdGUgZGV2aWNlITogR1BVRGV2aWNlO1xyXG4gIHByaXZhdGUgcXVldWUhOiBHUFVRdWV1ZTtcclxuICBwcml2YXRlIHdlc3RUZXh0dXJlITogR1BVVGV4dHVyZTtcclxuICBwcml2YXRlIGVhc3RUZXh0dXJlITogR1BVVGV4dHVyZTtcclxuICBwcml2YXRlIHVuaWZvcm1zQnVmZmVyITogR1BVQnVmZmVyO1xyXG4gIHByaXZhdGUgcHJpbWFyeUNvbG9yc0J1ZmZlciE6IEdQVUJ1ZmZlcjtcclxuICBwcml2YXRlIHN0YXRlc0J1ZmZlciE6IEdQVUJ1ZmZlcjtcclxuICBwcml2YXRlIG93bmVyQ29sb3JzQnVmZmVyITogR1BVQnVmZmVyO1xyXG4gIHByaXZhdGUgc2Vjb25kYXJ5Q29sb3JzQnVmZmVyITogR1BVQnVmZmVyO1xyXG4gIHByaXZhdGUgc2hhZGVyTW9kdWxlITogR1BVU2hhZGVyTW9kdWxlO1xyXG4gIHByaXZhdGUgcGlwZWxpbmUhOiBHUFVSZW5kZXJQaXBlbGluZTtcclxuICBwcml2YXRlIGJpbmRHcm91cExheW91dCE6IEdQVUJpbmRHcm91cExheW91dDtcclxuICBwcml2YXRlIGJpbmRHcm91cCE6IEdQVUJpbmRHcm91cDtcclxuICBwcml2YXRlIGNhbnZhc0NvbnRleHQ/OiBHUFVDYW52YXNDb250ZXh0O1xyXG4gIHByaXZhdGUgdGlsZVdpZHRoOiBudW1iZXIgPSAwO1xyXG4gIHByaXZhdGUgdGlsZUhlaWdodDogbnVtYmVyID0gMDtcclxuICBwcml2YXRlIGNhbnZhc1dpZHRoOiBudW1iZXIgPSAxOTIwO1xyXG4gIHByaXZhdGUgY2FudmFzSGVpZ2h0OiBudW1iZXIgPSAxMDgwO1xyXG4gIHByaXZhdGUgbWF4UHJvdmluY2VJZDogbnVtYmVyID0gODE5MjtcclxuXHJcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSgpOiBQcm9taXNlPE1hcEdwdUNvbnRleHQ+IHtcclxuICAgIGNvbnN0IGNvbnRleHQgPSBuZXcgTWFwR3B1Q29udGV4dCgpO1xyXG4gICAgYXdhaXQgY29udGV4dC5pbml0KCk7XHJcbiAgICByZXR1cm4gY29udGV4dDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgaW5pdCgpIHtcclxuICAgIGlmICghbmF2aWdhdG9yLmdwdSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYkdQVSBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlcicpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGFkYXB0ZXIgPSBhd2FpdCBuYXZpZ2F0b3IuZ3B1LnJlcXVlc3RBZGFwdGVyKCk7XHJcbiAgICBpZiAoIWFkYXB0ZXIpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZ2V0IEdQVSBhZGFwdGVyJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5kZXZpY2UgPSBhd2FpdCBhZGFwdGVyLnJlcXVlc3REZXZpY2UoKTtcclxuICAgIHRoaXMucXVldWUgPSB0aGlzLmRldmljZS5xdWV1ZTtcclxuXHJcbiAgICBjb25zb2xlLmxvZygn4pyTIEdQVSBpbml0aWFsaXplZCcpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgbG9hZE1hcFRleHR1cmVzKFxyXG4gICAgd2VzdERhdGE6IFVpbnQxNkFycmF5LFxyXG4gICAgZWFzdERhdGE6IFVpbnQxNkFycmF5LFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyXHJcbiAgKSB7XHJcbiAgICB0aGlzLndlc3RUZXh0dXJlID0gdGhpcy5kZXZpY2UuY3JlYXRlVGV4dHVyZSh7XHJcbiAgICAgIHNpemU6IHsgd2lkdGgsIGhlaWdodCB9LFxyXG4gICAgICBmb3JtYXQ6ICdyMTZ1aW50JyxcclxuICAgICAgdXNhZ2U6IEdQVVRleHR1cmVVc2FnZS5URVhUVVJFX0JJTkRJTkcgfCBHUFVUZXh0dXJlVXNhZ2UuQ09QWV9EU1QsXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnF1ZXVlLndyaXRlVGV4dHVyZShcclxuICAgICAgeyB0ZXh0dXJlOiB0aGlzLndlc3RUZXh0dXJlIH0sXHJcbiAgICAgIHdlc3REYXRhLmJ1ZmZlcixcclxuICAgICAgeyBieXRlc1BlclJvdzogd2lkdGggKiAyIH0sXHJcbiAgICAgIHsgd2lkdGgsIGhlaWdodCB9XHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuZWFzdFRleHR1cmUgPSB0aGlzLmRldmljZS5jcmVhdGVUZXh0dXJlKHtcclxuICAgICAgc2l6ZTogeyB3aWR0aCwgaGVpZ2h0IH0sXHJcbiAgICAgIGZvcm1hdDogJ3IxNnVpbnQnLFxyXG4gICAgICB1c2FnZTogR1BVVGV4dHVyZVVzYWdlLlRFWFRVUkVfQklORElORyB8IEdQVVRleHR1cmVVc2FnZS5DT1BZX0RTVCxcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMucXVldWUud3JpdGVUZXh0dXJlKFxyXG4gICAgICB7IHRleHR1cmU6IHRoaXMuZWFzdFRleHR1cmUgfSxcclxuICAgICAgZWFzdERhdGEuYnVmZmVyLFxyXG4gICAgICB7IGJ5dGVzUGVyUm93OiB3aWR0aCAqIDIgfSxcclxuICAgICAgeyB3aWR0aCwgaGVpZ2h0IH1cclxuICAgICk7XHJcblxyXG4gICAgY29uc29sZS5sb2coYOKckyBNYXAgdGV4dHVyZXMgdXBsb2FkZWQgKCR7d2lkdGh9eCR7aGVpZ2h0fSlgKTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZVVuaWZvcm1CdWZmZXIodGlsZVdpZHRoOiBudW1iZXIsIHRpbGVIZWlnaHQ6IG51bWJlciwgbWF4UHJvdmluY2VJZDogbnVtYmVyID0gODE5Mikge1xyXG4gICAgdGhpcy50aWxlV2lkdGggPSB0aWxlV2lkdGg7XHJcbiAgICB0aGlzLnRpbGVIZWlnaHQgPSB0aWxlSGVpZ2h0O1xyXG4gICAgdGhpcy5tYXhQcm92aW5jZUlkID0gbWF4UHJvdmluY2VJZDtcclxuXHJcbiAgICAvLyBVbmlmb3JtcyBzdHJ1Y3QgLSBuZWVkcyA0OCBieXRlcyArIHBhZGRpbmcgdG8gNjRcclxuICAgIHRoaXMudW5pZm9ybXNCdWZmZXIgPSB0aGlzLmRldmljZS5jcmVhdGVCdWZmZXIoe1xyXG4gICAgICBzaXplOiA2NCxcclxuICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlVOSUZPUk0gfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCxcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKGDinJMgVW5pZm9ybSBidWZmZXIgY3JlYXRlZCAodGlsZTogJHt0aWxlV2lkdGh9eCR7dGlsZUhlaWdodH0sIG1heFByb3ZpbmNlSWQ6ICR7bWF4UHJvdmluY2VJZH0pYCk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVDb2xvckJ1ZmZlcnMocHJvdmluY2VDb3VudDogbnVtYmVyKSB7XHJcbiAgICAvLyBDcmVhdGUgYWxsIDQgY29sb3Ivc3RhdGUgYnVmZmVyc1xyXG4gICAgdGhpcy5wcmltYXJ5Q29sb3JzQnVmZmVyID0gdGhpcy5kZXZpY2UuY3JlYXRlQnVmZmVyKHtcclxuICAgICAgc2l6ZTogcHJvdmluY2VDb3VudCAqIDQsXHJcbiAgICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5TVE9SQUdFIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QsXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnN0YXRlc0J1ZmZlciA9IHRoaXMuZGV2aWNlLmNyZWF0ZUJ1ZmZlcih7XHJcbiAgICAgIHNpemU6IHByb3ZpbmNlQ291bnQgKiA0LFxyXG4gICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuU1RPUkFHRSB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfRFNULFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5vd25lckNvbG9yc0J1ZmZlciA9IHRoaXMuZGV2aWNlLmNyZWF0ZUJ1ZmZlcih7XHJcbiAgICAgIHNpemU6IHByb3ZpbmNlQ291bnQgKiA0LFxyXG4gICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuU1RPUkFHRSB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfRFNULFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5zZWNvbmRhcnlDb2xvcnNCdWZmZXIgPSB0aGlzLmRldmljZS5jcmVhdGVCdWZmZXIoe1xyXG4gICAgICBzaXplOiBwcm92aW5jZUNvdW50ICogNCxcclxuICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlNUT1JBR0UgfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEluaXRpYWxpemUgd2l0aCBkZWZhdWx0IHZhbHVlcyAoZ3JheSlcclxuICAgIGNvbnN0IGRlZmF1bHRDb2xvciA9IHBhY2tDb2xvcig5NCwgOTQsIDk0KTtcclxuICAgIGNvbnN0IGRlZmF1bHRQcmltYXJ5ID0gbmV3IFVpbnQzMkFycmF5KHByb3ZpbmNlQ291bnQpLmZpbGwoZGVmYXVsdENvbG9yKTtcclxuICAgIGNvbnN0IGRlZmF1bHRTdGF0ZXMgPSBuZXcgVWludDMyQXJyYXkocHJvdmluY2VDb3VudCkuZmlsbCgwKTtcclxuICAgIGNvbnN0IGRlZmF1bHRPd25lciA9IG5ldyBVaW50MzJBcnJheShwcm92aW5jZUNvdW50KS5maWxsKGRlZmF1bHRDb2xvcik7XHJcbiAgICBjb25zdCBkZWZhdWx0U2Vjb25kYXJ5ID0gbmV3IFVpbnQzMkFycmF5KHByb3ZpbmNlQ291bnQpLmZpbGwoMCk7XHJcblxyXG4gICAgdGhpcy5xdWV1ZS53cml0ZUJ1ZmZlcih0aGlzLnByaW1hcnlDb2xvcnNCdWZmZXIsIDAsIGRlZmF1bHRQcmltYXJ5LmJ1ZmZlciBhcyBBcnJheUJ1ZmZlcik7XHJcbiAgICB0aGlzLnF1ZXVlLndyaXRlQnVmZmVyKHRoaXMuc3RhdGVzQnVmZmVyLCAwLCBkZWZhdWx0U3RhdGVzLmJ1ZmZlciBhcyBBcnJheUJ1ZmZlcik7XHJcbiAgICB0aGlzLnF1ZXVlLndyaXRlQnVmZmVyKHRoaXMub3duZXJDb2xvcnNCdWZmZXIsIDAsIGRlZmF1bHRPd25lci5idWZmZXIgYXMgQXJyYXlCdWZmZXIpO1xyXG4gICAgdGhpcy5xdWV1ZS53cml0ZUJ1ZmZlcih0aGlzLnNlY29uZGFyeUNvbG9yc0J1ZmZlciwgMCwgZGVmYXVsdFNlY29uZGFyeS5idWZmZXIgYXMgQXJyYXlCdWZmZXIpO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKGDinJMgQ29sb3IgYnVmZmVycyBjcmVhdGVkICgke3Byb3ZpbmNlQ291bnR9IHByb3ZpbmNlcylgKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVVuaWZvcm1zKHZpZXdwb3J0OiB7XHJcbiAgICB4OiBudW1iZXI7XHJcbiAgICB5OiBudW1iZXI7XHJcbiAgICB3aWR0aDogbnVtYmVyO1xyXG4gICAgaGVpZ2h0OiBudW1iZXI7XHJcbiAgICB6b29tOiBudW1iZXI7XHJcbiAgfSkge1xyXG4gICAgY29uc3QgZGF0YSA9IG5ldyBBcnJheUJ1ZmZlcig2NCk7XHJcbiAgICBjb25zdCB2aWV3ID0gbmV3IERhdGFWaWV3KGRhdGEpO1xyXG4gICAgbGV0IG9mZnNldCA9IDA7XHJcblxyXG4gICAgLy8gc3RydWN0IENvbXB1dGVVbmlmb3JtcyAobXVzdCBtYXRjaCBXR1NMKVxyXG4gICAgdmlldy5zZXRVaW50MzIob2Zmc2V0LCB0aGlzLnRpbGVXaWR0aCwgdHJ1ZSk7XHJcbiAgICBvZmZzZXQgKz0gNDtcclxuICAgIHZpZXcuc2V0VWludDMyKG9mZnNldCwgdGhpcy50aWxlSGVpZ2h0LCB0cnVlKTtcclxuICAgIG9mZnNldCArPSA0O1xyXG4gICAgdmlldy5zZXRVaW50MzIob2Zmc2V0LCAxLCB0cnVlKTsgLy8gZW5hYmxlX2xvY2F0aW9uX2JvcmRlcnNcclxuICAgIG9mZnNldCArPSA0O1xyXG4gICAgdmlldy5zZXRVaW50MzIob2Zmc2V0LCAxLCB0cnVlKTsgLy8gZW5hYmxlX293bmVyX2JvcmRlcnNcclxuICAgIG9mZnNldCArPSA0O1xyXG4gICAgdmlldy5zZXRVaW50MzIob2Zmc2V0LCBNYXRoLmZsb29yKHZpZXdwb3J0LngpLCB0cnVlKTsgLy8gdmlld194XHJcbiAgICBvZmZzZXQgKz0gNDtcclxuICAgIHZpZXcuc2V0VWludDMyKG9mZnNldCwgTWF0aC5mbG9vcih2aWV3cG9ydC55KSwgdHJ1ZSk7IC8vIHZpZXdfeVxyXG4gICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICB2aWV3LnNldFVpbnQzMihvZmZzZXQsIE1hdGguZmxvb3Iodmlld3BvcnQud2lkdGgpLCB0cnVlKTsgLy8gdmlld193aWR0aFxyXG4gICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICB2aWV3LnNldFVpbnQzMihvZmZzZXQsIE1hdGguZmxvb3Iodmlld3BvcnQuaGVpZ2h0KSwgdHJ1ZSk7IC8vIHZpZXdfaGVpZ2h0XHJcbiAgICBvZmZzZXQgKz0gNDtcclxuICAgIHZpZXcuc2V0RmxvYXQzMihvZmZzZXQsIHZpZXdwb3J0Lnpvb20sIHRydWUpOyAvLyB6b29tX2xldmVsXHJcbiAgICBvZmZzZXQgKz0gNDtcclxuICAgIHZpZXcuc2V0VWludDMyKG9mZnNldCwgdGhpcy5jYW52YXNXaWR0aCwgdHJ1ZSk7IC8vIHN1cmZhY2Vfd2lkdGhcclxuICAgIG9mZnNldCArPSA0O1xyXG4gICAgdmlldy5zZXRVaW50MzIob2Zmc2V0LCB0aGlzLmNhbnZhc0hlaWdodCwgdHJ1ZSk7IC8vIHN1cmZhY2VfaGVpZ2h0XHJcbiAgICBvZmZzZXQgKz0gNDtcclxuICAgIHZpZXcuc2V0VWludDMyKG9mZnNldCwgdGhpcy5tYXhQcm92aW5jZUlkLCB0cnVlKTsgLy8gbWF4X3Byb3ZpbmNlX2lkXHJcblxyXG4gICAgdGhpcy5xdWV1ZS53cml0ZUJ1ZmZlcih0aGlzLnVuaWZvcm1zQnVmZmVyLCAwLCBkYXRhKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVByb3ZpbmNlQ29sb3JzKGNvbG9yczogVWludDMyQXJyYXkpIHtcclxuICAgIHRoaXMucXVldWUud3JpdGVCdWZmZXIodGhpcy5wcmltYXJ5Q29sb3JzQnVmZmVyLCAwLCBjb2xvcnMuYnVmZmVyIGFzIEFycmF5QnVmZmVyKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZU93bmVyQ29sb3JzKGNvbG9yczogVWludDMyQXJyYXkpIHtcclxuICAgIHRoaXMucXVldWUud3JpdGVCdWZmZXIodGhpcy5vd25lckNvbG9yc0J1ZmZlciwgMCwgY29sb3JzLmJ1ZmZlciBhcyBBcnJheUJ1ZmZlcik7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVTZWNvbmRhcnlDb2xvcnMoY29sb3JzOiBVaW50MzJBcnJheSkge1xyXG4gICAgdGhpcy5xdWV1ZS53cml0ZUJ1ZmZlcih0aGlzLnNlY29uZGFyeUNvbG9yc0J1ZmZlciwgMCwgY29sb3JzLmJ1ZmZlciBhcyBBcnJheUJ1ZmZlcik7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVTdGF0ZXMoc3RhdGVzOiBVaW50MzJBcnJheSkge1xyXG4gICAgdGhpcy5xdWV1ZS53cml0ZUJ1ZmZlcih0aGlzLnN0YXRlc0J1ZmZlciwgMCwgc3RhdGVzLmJ1ZmZlciBhcyBBcnJheUJ1ZmZlcik7XHJcbiAgfVxyXG5cclxuICBhc3luYyBjcmVhdGVSZW5kZXJQaXBlbGluZShjYW52YXNGb3JtYXQ6IEdQVVRleHR1cmVGb3JtYXQpIHtcclxuICAgIGNvbnN0IHNoYWRlckNvZGUgPSBhd2FpdCBmZXRjaCgnL3NoYWRlcnMvbWFwLndnc2wnKS50aGVuKChyKSA9PiByLnRleHQoKSk7XHJcblxyXG4gICAgdGhpcy5zaGFkZXJNb2R1bGUgPSB0aGlzLmRldmljZS5jcmVhdGVTaGFkZXJNb2R1bGUoe1xyXG4gICAgICBjb2RlOiBzaGFkZXJDb2RlLFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5iaW5kR3JvdXBMYXlvdXQgPSB0aGlzLmRldmljZS5jcmVhdGVCaW5kR3JvdXBMYXlvdXQoe1xyXG4gICAgICBlbnRyaWVzOiBbXHJcbiAgICAgICAgeyBiaW5kaW5nOiAwLCB2aXNpYmlsaXR5OiBHUFVTaGFkZXJTdGFnZS5GUkFHTUVOVCwgdGV4dHVyZTogeyBzYW1wbGVUeXBlOiAndWludCcsIHZpZXdEaW1lbnNpb246ICcyZCcgfSB9LFxyXG4gICAgICAgIHsgYmluZGluZzogMSwgdmlzaWJpbGl0eTogR1BVU2hhZGVyU3RhZ2UuRlJBR01FTlQsIHRleHR1cmU6IHsgc2FtcGxlVHlwZTogJ3VpbnQnLCB2aWV3RGltZW5zaW9uOiAnMmQnIH0gfSxcclxuICAgICAgICB7IGJpbmRpbmc6IDIsIHZpc2liaWxpdHk6IEdQVVNoYWRlclN0YWdlLkZSQUdNRU5UIHwgR1BVU2hhZGVyU3RhZ2UuVkVSVEVYLCBidWZmZXI6IHsgdHlwZTogJ3VuaWZvcm0nIH0gfSxcclxuICAgICAgICB7IGJpbmRpbmc6IDMsIHZpc2liaWxpdHk6IEdQVVNoYWRlclN0YWdlLkZSQUdNRU5ULCBidWZmZXI6IHsgdHlwZTogJ3JlYWQtb25seS1zdG9yYWdlJyB9IH0sXHJcbiAgICAgICAgeyBiaW5kaW5nOiA0LCB2aXNpYmlsaXR5OiBHUFVTaGFkZXJTdGFnZS5GUkFHTUVOVCwgYnVmZmVyOiB7IHR5cGU6ICdyZWFkLW9ubHktc3RvcmFnZScgfSB9LFxyXG4gICAgICAgIHsgYmluZGluZzogNSwgdmlzaWJpbGl0eTogR1BVU2hhZGVyU3RhZ2UuRlJBR01FTlQsIGJ1ZmZlcjogeyB0eXBlOiAncmVhZC1vbmx5LXN0b3JhZ2UnIH0gfSxcclxuICAgICAgICB7IGJpbmRpbmc6IDYsIHZpc2liaWxpdHk6IEdQVVNoYWRlclN0YWdlLkZSQUdNRU5ULCBidWZmZXI6IHsgdHlwZTogJ3JlYWQtb25seS1zdG9yYWdlJyB9IH0sXHJcbiAgICAgIF0sXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBwaXBlbGluZUxheW91dCA9IHRoaXMuZGV2aWNlLmNyZWF0ZVBpcGVsaW5lTGF5b3V0KHtcclxuICAgICAgYmluZEdyb3VwTGF5b3V0czogW3RoaXMuYmluZEdyb3VwTGF5b3V0XSxcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMucGlwZWxpbmUgPSB0aGlzLmRldmljZS5jcmVhdGVSZW5kZXJQaXBlbGluZSh7XHJcbiAgICAgIGxheW91dDogcGlwZWxpbmVMYXlvdXQsXHJcbiAgICAgIHZlcnRleDoge1xyXG4gICAgICAgIG1vZHVsZTogdGhpcy5zaGFkZXJNb2R1bGUsXHJcbiAgICAgICAgZW50cnlQb2ludDogJ3ZzX21haW4nLFxyXG4gICAgICB9LFxyXG4gICAgICBmcmFnbWVudDoge1xyXG4gICAgICAgIG1vZHVsZTogdGhpcy5zaGFkZXJNb2R1bGUsXHJcbiAgICAgICAgZW50cnlQb2ludDogJ2ZzX21haW4nLFxyXG4gICAgICAgIHRhcmdldHM6IFt7IGZvcm1hdDogY2FudmFzRm9ybWF0IH1dLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5iaW5kR3JvdXAgPSB0aGlzLmRldmljZS5jcmVhdGVCaW5kR3JvdXAoe1xyXG4gICAgICBsYXlvdXQ6IHRoaXMuYmluZEdyb3VwTGF5b3V0LFxyXG4gICAgICBlbnRyaWVzOiBbXHJcbiAgICAgICAgeyBiaW5kaW5nOiAwLCByZXNvdXJjZTogdGhpcy53ZXN0VGV4dHVyZS5jcmVhdGVWaWV3KCkgfSxcclxuICAgICAgICB7IGJpbmRpbmc6IDEsIHJlc291cmNlOiB0aGlzLmVhc3RUZXh0dXJlLmNyZWF0ZVZpZXcoKSB9LFxyXG4gICAgICAgIHsgYmluZGluZzogMiwgcmVzb3VyY2U6IHsgYnVmZmVyOiB0aGlzLnVuaWZvcm1zQnVmZmVyIH0gfSxcclxuICAgICAgICB7IGJpbmRpbmc6IDMsIHJlc291cmNlOiB7IGJ1ZmZlcjogdGhpcy5wcmltYXJ5Q29sb3JzQnVmZmVyIH0gfSxcclxuICAgICAgICB7IGJpbmRpbmc6IDQsIHJlc291cmNlOiB7IGJ1ZmZlcjogdGhpcy5zdGF0ZXNCdWZmZXIgfSB9LFxyXG4gICAgICAgIHsgYmluZGluZzogNSwgcmVzb3VyY2U6IHsgYnVmZmVyOiB0aGlzLm93bmVyQ29sb3JzQnVmZmVyIH0gfSxcclxuICAgICAgICB7IGJpbmRpbmc6IDYsIHJlc291cmNlOiB7IGJ1ZmZlcjogdGhpcy5zZWNvbmRhcnlDb2xvcnNCdWZmZXIgfSB9LFxyXG4gICAgICBdLFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc29sZS5sb2coJ+KckyBSZW5kZXIgcGlwZWxpbmUgY3JlYXRlZCcpO1xyXG4gIH1cclxuXHJcbiAgY29uZmlndXJlQ2FudmFzKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLmNhbnZhc1dpZHRoID0gd2lkdGg7XHJcbiAgICB0aGlzLmNhbnZhc0hlaWdodCA9IGhlaWdodDtcclxuXHJcbiAgICB0aGlzLmNhbnZhc0NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ3B1JykgYXMgR1BVQ2FudmFzQ29udGV4dDtcclxuICAgIGlmICghdGhpcy5jYW52YXNDb250ZXh0KSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGdldCBXZWJHUFUgY2FudmFzIGNvbnRleHQnKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNhbnZhc0NvbnRleHQuY29uZmlndXJlKHtcclxuICAgICAgZGV2aWNlOiB0aGlzLmRldmljZSxcclxuICAgICAgZm9ybWF0OiBuYXZpZ2F0b3IuZ3B1LmdldFByZWZlcnJlZENhbnZhc0Zvcm1hdCgpLFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc29sZS5sb2coYOKckyBDYW52YXMgY29uZmlndXJlZDogJHt3aWR0aH14JHtoZWlnaHR9IHBoeXNpY2FsIHBpeGVsc2ApO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgaWYgKCF0aGlzLmNhbnZhc0NvbnRleHQpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW52YXMgbm90IGNvbmZpZ3VyZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0ZXh0dXJlID0gdGhpcy5jYW52YXNDb250ZXh0LmdldEN1cnJlbnRUZXh0dXJlKCk7XHJcbiAgICBjb25zdCB2aWV3ID0gdGV4dHVyZS5jcmVhdGVWaWV3KCk7XHJcblxyXG4gICAgY29uc3QgZW5jb2RlciA9IHRoaXMuZGV2aWNlLmNyZWF0ZUNvbW1hbmRFbmNvZGVyKCk7XHJcblxyXG4gICAgY29uc3QgcGFzcyA9IGVuY29kZXIuYmVnaW5SZW5kZXJQYXNzKHtcclxuICAgICAgY29sb3JBdHRhY2htZW50czogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIHZpZXc6IHZpZXcsXHJcbiAgICAgICAgICBjbGVhclZhbHVlOiB7IHI6IDAuMDUsIGc6IDAuMDUsIGI6IDAuMDUsIGE6IDEgfSxcclxuICAgICAgICAgIGxvYWRPcDogJ2NsZWFyJyxcclxuICAgICAgICAgIHN0b3JlT3A6ICdzdG9yZScsXHJcbiAgICAgICAgfSxcclxuICAgICAgXSxcclxuICAgIH0pO1xyXG5cclxuICAgIHBhc3Muc2V0UGlwZWxpbmUodGhpcy5waXBlbGluZSk7XHJcbiAgICBwYXNzLnNldEJpbmRHcm91cCgwLCB0aGlzLmJpbmRHcm91cCk7XHJcbiAgICBwYXNzLmRyYXcoMyk7IC8vIERyYXcgZnVsbHNjcmVlbiB0cmlhbmdsZVxyXG4gICAgcGFzcy5lbmQoKTtcclxuXHJcbiAgICB0aGlzLnF1ZXVlLnN1Ym1pdChbZW5jb2Rlci5maW5pc2goKV0pO1xyXG4gIH1cclxufVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIC0gcGFjayBhcyAweDAwUlJHR0JCIHRvIG1hdGNoIHNoYWRlciB1bnBhY2tfY29sb3JcclxuZnVuY3Rpb24gcGFja0NvbG9yKHI6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIpOiBudW1iZXIge1xyXG4gIHJldHVybiAociA8PCAxNikgfCAoZyA8PCA4KSB8IGI7XHJcbn0iXSwibmFtZXMiOlsiTWFwR3B1Q29udGV4dCIsImNyZWF0ZSIsImNvbnRleHQiLCJpbml0IiwibmF2aWdhdG9yIiwiZ3B1IiwiRXJyb3IiLCJhZGFwdGVyIiwicmVxdWVzdEFkYXB0ZXIiLCJkZXZpY2UiLCJyZXF1ZXN0RGV2aWNlIiwicXVldWUiLCJjb25zb2xlIiwibG9nIiwibG9hZE1hcFRleHR1cmVzIiwid2VzdERhdGEiLCJlYXN0RGF0YSIsIndpZHRoIiwiaGVpZ2h0Iiwid2VzdFRleHR1cmUiLCJjcmVhdGVUZXh0dXJlIiwic2l6ZSIsImZvcm1hdCIsInVzYWdlIiwiR1BVVGV4dHVyZVVzYWdlIiwiVEVYVFVSRV9CSU5ESU5HIiwiQ09QWV9EU1QiLCJ3cml0ZVRleHR1cmUiLCJ0ZXh0dXJlIiwiYnVmZmVyIiwiYnl0ZXNQZXJSb3ciLCJlYXN0VGV4dHVyZSIsImNyZWF0ZVVuaWZvcm1CdWZmZXIiLCJ0aWxlV2lkdGgiLCJ0aWxlSGVpZ2h0IiwibWF4UHJvdmluY2VJZCIsInVuaWZvcm1zQnVmZmVyIiwiY3JlYXRlQnVmZmVyIiwiR1BVQnVmZmVyVXNhZ2UiLCJVTklGT1JNIiwiY3JlYXRlQ29sb3JCdWZmZXJzIiwicHJvdmluY2VDb3VudCIsInByaW1hcnlDb2xvcnNCdWZmZXIiLCJTVE9SQUdFIiwic3RhdGVzQnVmZmVyIiwib3duZXJDb2xvcnNCdWZmZXIiLCJzZWNvbmRhcnlDb2xvcnNCdWZmZXIiLCJkZWZhdWx0Q29sb3IiLCJwYWNrQ29sb3IiLCJkZWZhdWx0UHJpbWFyeSIsIlVpbnQzMkFycmF5IiwiZmlsbCIsImRlZmF1bHRTdGF0ZXMiLCJkZWZhdWx0T3duZXIiLCJkZWZhdWx0U2Vjb25kYXJ5Iiwid3JpdGVCdWZmZXIiLCJ1cGRhdGVVbmlmb3JtcyIsInZpZXdwb3J0IiwiZGF0YSIsIkFycmF5QnVmZmVyIiwidmlldyIsIkRhdGFWaWV3Iiwib2Zmc2V0Iiwic2V0VWludDMyIiwiTWF0aCIsImZsb29yIiwieCIsInkiLCJzZXRGbG9hdDMyIiwiem9vbSIsImNhbnZhc1dpZHRoIiwiY2FudmFzSGVpZ2h0IiwidXBkYXRlUHJvdmluY2VDb2xvcnMiLCJjb2xvcnMiLCJ1cGRhdGVPd25lckNvbG9ycyIsInVwZGF0ZVNlY29uZGFyeUNvbG9ycyIsInVwZGF0ZVN0YXRlcyIsInN0YXRlcyIsImNyZWF0ZVJlbmRlclBpcGVsaW5lIiwiY2FudmFzRm9ybWF0Iiwic2hhZGVyQ29kZSIsImZldGNoIiwidGhlbiIsInIiLCJ0ZXh0Iiwic2hhZGVyTW9kdWxlIiwiY3JlYXRlU2hhZGVyTW9kdWxlIiwiY29kZSIsImJpbmRHcm91cExheW91dCIsImNyZWF0ZUJpbmRHcm91cExheW91dCIsImVudHJpZXMiLCJiaW5kaW5nIiwidmlzaWJpbGl0eSIsIkdQVVNoYWRlclN0YWdlIiwiRlJBR01FTlQiLCJzYW1wbGVUeXBlIiwidmlld0RpbWVuc2lvbiIsIlZFUlRFWCIsInR5cGUiLCJwaXBlbGluZUxheW91dCIsImNyZWF0ZVBpcGVsaW5lTGF5b3V0IiwiYmluZEdyb3VwTGF5b3V0cyIsInBpcGVsaW5lIiwibGF5b3V0IiwidmVydGV4IiwibW9kdWxlIiwiZW50cnlQb2ludCIsImZyYWdtZW50IiwidGFyZ2V0cyIsImJpbmRHcm91cCIsImNyZWF0ZUJpbmRHcm91cCIsInJlc291cmNlIiwiY3JlYXRlVmlldyIsImNvbmZpZ3VyZUNhbnZhcyIsImNhbnZhcyIsImNhbnZhc0NvbnRleHQiLCJnZXRDb250ZXh0IiwiY29uZmlndXJlIiwiZ2V0UHJlZmVycmVkQ2FudmFzRm9ybWF0IiwicmVuZGVyIiwiZ2V0Q3VycmVudFRleHR1cmUiLCJlbmNvZGVyIiwiY3JlYXRlQ29tbWFuZEVuY29kZXIiLCJwYXNzIiwiYmVnaW5SZW5kZXJQYXNzIiwiY29sb3JBdHRhY2htZW50cyIsImNsZWFyVmFsdWUiLCJnIiwiYiIsImEiLCJsb2FkT3AiLCJzdG9yZU9wIiwic2V0UGlwZWxpbmUiLCJzZXRCaW5kR3JvdXAiLCJkcmF3IiwiZW5kIiwic3VibWl0IiwiZmluaXNoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/map-renderer/gpu-context.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/lib/map-renderer/viewport.ts":
/*!******************************************!*\
  !*** ./src/lib/map-renderer/viewport.ts ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MapViewport: () => (/* binding */ MapViewport)\n/* harmony export */ });\nclass MapViewport {\n    // Resize canvas and optionally fit map to screen\n    resize(width, height) {\n        this.canvasSize = {\n            width,\n            height\n        };\n    }\n    // Fit map height to screen (initial view)\n    fitToScreen() {\n        // Calculate zoom so map height fits canvas height\n        this.zoom = this.canvasSize.height / this.mapSize.height * 3;\n        this.position = {\n            x: 2142,\n            y: 236\n        };\n    }\n    // Pan: move viewport\n    pan(deltaX, deltaY) {\n        this.position.x += deltaX / this.zoom;\n        this.position.y += deltaY / this.zoom;\n        // Wrap X (infinite horizontal scroll)\n        this.position.x = (this.position.x % this.mapSize.width + this.mapSize.width) % this.mapSize.width;\n        // Clamp Y (no vertical wrap)\n        const viewHeight = this.canvasSize.height / this.zoom;\n        this.position.y = Math.max(0, Math.min(this.position.y, this.mapSize.height - viewHeight));\n        console.log(this.position.x);\n        console.log(this.position.y);\n    }\n    // Zoom at cursor position\n    zoomAt(cursorX, cursorY, zoomDelta) {\n        // World point under cursor before zoom\n        const worldX = this.position.x + cursorX / this.zoom;\n        const worldY = this.position.y + cursorY / this.zoom;\n        // Apply zoom\n        this.zoom *= zoomDelta;\n        this.zoom = Math.max(0.5, Math.min(this.zoom, 4));\n        // Reposition so same world point is under cursor\n        this.position.x = worldX - cursorX / this.zoom;\n        this.position.y = worldY - cursorY / this.zoom;\n        // Re-apply bounds\n        this.position.x = (this.position.x % this.mapSize.width + this.mapSize.width) % this.mapSize.width;\n        const viewHeight = this.canvasSize.height / this.zoom;\n        this.position.y = Math.max(0, Math.min(this.position.y, this.mapSize.height - viewHeight));\n    }\n    // Convert screen coordinates to map coordinates\n    screenToMap(screenX, screenY) {\n        const mapX = this.position.x + screenX / this.zoom;\n        const mapY = this.position.y + screenY / this.zoom;\n        return {\n            x: mapX,\n            y: mapY\n        };\n    }\n    getUniforms() {\n        return {\n            view_x: Math.floor(this.position.x),\n            view_y: Math.floor(this.position.y),\n            view_width: Math.floor(this.canvasSize.width / this.zoom),\n            view_height: Math.floor(this.canvasSize.height / this.zoom),\n            zoom_level: this.zoom\n        };\n    }\n    constructor(mapSize){\n        this.position = {\n            x: 0,\n            y: 0\n        };\n        this.zoom = 1.0;\n        this.mapSize = mapSize;\n        this.canvasSize = {\n            width: 1920,\n            height: 1080\n        };\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvbWFwLXJlbmRlcmVyL3ZpZXdwb3J0LnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxNQUFNQTtJQVdYLGlEQUFpRDtJQUNqREMsT0FBT0MsS0FBYSxFQUFFQyxNQUFjLEVBQUU7UUFDcEMsSUFBSSxDQUFDQyxVQUFVLEdBQUc7WUFBRUY7WUFBT0M7UUFBTztJQUNwQztJQUVBLDBDQUEwQztJQUMxQ0UsY0FBYztRQUNaLGtEQUFrRDtRQUNsRCxJQUFJLENBQUNDLElBQUksR0FBRyxJQUFLLENBQUNGLFVBQVUsQ0FBQ0QsTUFBTSxHQUFHLElBQUksQ0FBQ0ksT0FBTyxDQUFDSixNQUFNLEdBQUU7UUFDM0QsSUFBSSxDQUFDSyxRQUFRLEdBQUc7WUFBRUMsR0FBRztZQUFNQyxHQUFHO1FBQUk7SUFDcEM7SUFFQSxxQkFBcUI7SUFDckJDLElBQUlDLE1BQWMsRUFBRUMsTUFBYyxFQUFFO1FBQ2xDLElBQUksQ0FBQ0wsUUFBUSxDQUFDQyxDQUFDLElBQUlHLFNBQVMsSUFBSSxDQUFDTixJQUFJO1FBQ3JDLElBQUksQ0FBQ0UsUUFBUSxDQUFDRSxDQUFDLElBQUlHLFNBQVMsSUFBSSxDQUFDUCxJQUFJO1FBRXJDLHNDQUFzQztRQUN0QyxJQUFJLENBQUNFLFFBQVEsQ0FBQ0MsQ0FBQyxHQUFHLENBQUMsSUFBSyxDQUFDRCxRQUFRLENBQUNDLENBQUMsR0FBRyxJQUFJLENBQUNGLE9BQU8sQ0FBQ0wsS0FBSyxHQUFJLElBQUksQ0FBQ0ssT0FBTyxDQUFDTCxLQUFLLElBQUksSUFBSSxDQUFDSyxPQUFPLENBQUNMLEtBQUs7UUFFcEcsNkJBQTZCO1FBQzdCLE1BQU1ZLGFBQWEsSUFBSSxDQUFDVixVQUFVLENBQUNELE1BQU0sR0FBRyxJQUFJLENBQUNHLElBQUk7UUFDckQsSUFBSSxDQUFDRSxRQUFRLENBQUNFLENBQUMsR0FBR0ssS0FBS0MsR0FBRyxDQUFDLEdBQUdELEtBQUtFLEdBQUcsQ0FBQyxJQUFJLENBQUNULFFB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Y2VzIjpbIkM6XFxVc2Vyc1xcWWltaW5nIFN1XFxEZXNrdG9wXFxyZXBvc1xccm9tYW4tc3RvcnlcXGZyb250ZW5kXFxzcmNcXGxpYlxcbWFwLXJlbmRlcmVyXFx2aWV3cG9ydC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgTWFwVmlld3BvcnQge1xyXG4gIHByaXZhdGUgcG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSA9IHsgeDogMCwgeTogMCB9O1xyXG4gIHByaXZhdGUgem9vbTogbnVtYmVyID0gMS4wO1xyXG4gIHByaXZhdGUgbWFwU2l6ZTogeyB3aWR0aDogbnVtYmVyOyBoZWlnaHQ6IG51bWJlciB9O1xyXG4gIHByaXZhdGUgY2FudmFzU2l6ZTogeyB3aWR0aDogbnVtYmVyOyBoZWlnaHQ6IG51bWJlciB9O1xyXG4gIFxyXG4gIGNvbnN0cnVjdG9yKG1hcFNpemU6IHsgd2lkdGg6IG51bWJlcjsgaGVpZ2h0OiBudW1iZXIgfSkge1xyXG4gICAgdGhpcy5tYXBTaXplID0gbWFwU2l6ZTtcclxuICAgIHRoaXMuY2FudmFzU2l6ZSA9IHsgd2lkdGg6IDE5MjAsIGhlaWdodDogMTA4MCB9O1xyXG4gIH1cclxuXHJcbiAgLy8gUmVzaXplIGNhbnZhcyBhbmQgb3B0aW9uYWxseSBmaXQgbWFwIHRvIHNjcmVlblxyXG4gIHJlc2l6ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xyXG4gICAgdGhpcy5jYW52YXNTaXplID0geyB3aWR0aCwgaGVpZ2h0IH07XHJcbiAgfVxyXG5cclxuICAvLyBGaXQgbWFwIGhlaWdodCB0byBzY3JlZW4gKGluaXRpYWwgdmlldylcclxuICBmaXRUb1NjcmVlbigpIHtcclxuICAgIC8vIENhbGN1bGF0ZSB6b29tIHNvIG1hcCBoZWlnaHQgZml0cyBjYW52YXMgaGVpZ2h0XHJcbiAgICB0aGlzLnpvb20gPSAodGhpcy5jYW52YXNTaXplLmhlaWdodCAvIHRoaXMubWFwU2l6ZS5oZWlnaHQpKjM7XHJcbiAgICB0aGlzLnBvc2l0aW9uID0geyB4OiAyMTQyLCB5OiAyMzYgfTtcclxuICB9XHJcbiAgXHJcbiAgLy8gUGFuOiBtb3ZlIHZpZXdwb3J0XHJcbiAgcGFuKGRlbHRhWDogbnVtYmVyLCBkZWx0YVk6IG51bWJlcikge1xyXG4gICAgdGhpcy5wb3NpdGlvbi54ICs9IGRlbHRhWCAvIHRoaXMuem9vbTtcclxuICAgIHRoaXMucG9zaXRpb24ueSArPSBkZWx0YVkgLyB0aGlzLnpvb207XHJcbiAgICBcclxuICAgIC8vIFdyYXAgWCAoaW5maW5pdGUgaG9yaXpvbnRhbCBzY3JvbGwpXHJcbiAgICB0aGlzLnBvc2l0aW9uLnggPSAoKHRoaXMucG9zaXRpb24ueCAlIHRoaXMubWFwU2l6ZS53aWR0aCkgKyB0aGlzLm1hcFNpemUud2lkdGgpICUgdGhpcy5tYXBTaXplLndpZHRoO1xyXG4gICAgXHJcbiAgICAvLyBDbGFtcCBZIChubyB2ZXJ0aWNhbCB3cmFwKVxyXG4gICAgY29uc3Qgdmlld0hlaWdodCA9IHRoaXMuY2FudmFzU2l6ZS5oZWlnaHQgLyB0aGlzLnpvb207XHJcbiAgICB0aGlzLnBvc2l0aW9uLnkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbih0aGlzLnBvc2l0aW9uLnksIHRoaXMubWFwU2l6ZS5oZWlnaHQgLSB2aWV3SGVpZ2h0KSk7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLnBvc2l0aW9uLngpO1xyXG4gICAgY29uc29sZS5sb2codGhpcy5wb3NpdGlvbi55KTtcclxuXHJcbiAgfVxyXG4gIFxyXG4gIC8vIFpvb20gYXQgY3Vyc29yIHBvc2l0aW9uXHJcbiAgem9vbUF0KGN1cnNvclg6IG51bWJlciwgY3Vyc29yWTogbnVtYmVyLCB6b29tRGVsdGE6IG51bWJlcikge1xyXG4gICAgLy8gV29ybGQgcG9pbnQgdW5kZXIgY3Vyc29yIGJlZm9yZSB6b29tXHJcbiAgICBjb25zdCB3b3JsZFggPSB0aGlzLnBvc2l0aW9uLnggKyBjdXJzb3JYIC8gdGhpcy56b29tO1xyXG4gICAgY29uc3Qgd29ybGRZID0gdGhpcy5wb3NpdGlvbi55ICsgY3Vyc29yWSAvIHRoaXMuem9vbTtcclxuICAgIFxyXG4gICAgLy8gQXBwbHkgem9vbVxyXG4gICAgdGhpcy56b29tICo9IHpvb21EZWx0YTtcclxuICAgIHRoaXMuem9vbSA9IE1hdGgubWF4KDAuNSwgTWF0aC5taW4odGhpcy56b29tLCA0KSk7XHJcbiAgICBcclxuICAgIC8vIFJlcG9zaXRpb24gc28gc2FtZSB3b3JsZCBwb2ludCBpcyB1bmRlciBjdXJzb3JcclxuICAgIHRoaXMucG9zaXRpb24ueCA9IHdvcmxkWCAtIGN1cnNvclggLyB0aGlzLnpvb207XHJcbiAgICB0aGlzLnBvc2l0aW9uLnkgPSB3b3JsZFkgLSBjdXJzb3JZIC8gdGhpcy56b29tO1xyXG4gICAgXHJcbiAgICAvLyBSZS1hcHBseSBib3VuZHNcclxuICAgIHRoaXMucG9zaXRpb24ueCA9ICgodGhpcy5wb3NpdGlvbi54ICUgdGhpcy5tYXBTaXplLndpZHRoKSArIHRoaXMubWFwU2l6ZS53aWR0aCkgJSB0aGlzLm1hcFNpemUud2lkdGg7XHJcbiAgICBjb25zdCB2aWV3SGVpZ2h0ID0gdGhpcy5jYW52YXNTaXplLmhlaWdodCAvIHRoaXMuem9vbTtcclxuICAgIHRoaXMucG9zaXRpb24ueSA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMucG9zaXRpb24ueSwgdGhpcy5tYXBTaXplLmhlaWdodCAtIHZpZXdIZWlnaHQpKTtcclxuICB9XHJcbiAgXHJcbiAgLy8gQ29udmVydCBzY3JlZW4gY29vcmRpbmF0ZXMgdG8gbWFwIGNvb3JkaW5hdGVzXHJcbiAgc2NyZWVuVG9NYXAoc2NyZWVuWDogbnVtYmVyLCBzY3JlZW5ZOiBudW1iZXIpOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0ge1xyXG4gICAgY29uc3QgbWFwWCA9IHRoaXMucG9zaXRpb24ueCArIHNjcmVlblggLyB0aGlzLnpvb207XHJcbiAgICBjb25zdCBtYXBZID0gdGhpcy5wb3NpdGlvbi55ICsgc2NyZWVuWSAvIHRoaXMuem9vbTtcclxuICAgIHJldHVybiB7IHg6IG1hcFgsIHk6IG1hcFkgfTtcclxuICB9XHJcbiAgXHJcbiAgZ2V0VW5pZm9ybXMoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB2aWV3X3g6IE1hdGguZmxvb3IodGhpcy5wb3NpdGlvbi54KSxcclxuICAgICAgdmlld195OiBNYXRoLmZsb29yKHRoaXMucG9zaXRpb24ueSksXHJcbiAgICAgIHZpZXdfd2lkdGg6IE1hdGguZmxvb3IodGhpcy5jYW52YXNTaXplLndpZHRoIC8gdGhpcy56b29tKSxcclxuICAgICAgdmlld19oZWlnaHQ6IE1hdGguZmxvb3IodGhpcy5jYW52YXNTaXplLmhlaWdodCAvIHRoaXMuem9vbSksXHJcbiAgICAgIHpvb21fbGV2ZWw6IHRoaXMuem9vbSxcclxuICAgIH07XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbIk1hcFZpZXdwb3J0IiwicmVzaXplIiwid2lkdGgiLCJoZWlnaHQiLCJjYW52YXNTaXplIiwiZml0VG9TY3JlZW4iLCJ6b29tIiwibWFwU2l6ZSIsInBvc2l0aW9uIiwieCIsInkiLCJwYW4iLCJkZWx0YVgiLCJkZWx0YVkiLCJ2aWV3SGVpZ2h0IiwiTWF0aCIsIm1heCIsIm1pbiIsImNvbnNvbGUiLCJsb2ciLCJ6b29tQXQiLCJjdXJzb3JYIiwiY3Vyc29yWSIsInpvb21EZWx0YSIsIndvcmxkWCIsIndvcmxkWSIsInNjcmVlblRvTWFwIiwic2NyZWVuWCIsInNjcmVlblkiLCJtYXBYIiwibWFwWSIsImdldFVuaWZvcm1zIiwidmlld194IiwiZmxvb3IiLCJ2aWV3X3kiLCJ2aWV3X3dpZHRoIiwidmlld19oZWlnaHQiLCJ6b29tX2xldmVsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/map-renderer/viewport.ts\n"));

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["main-app"], () => (__webpack_exec__("(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CYiming%20Su%5C%5CDesktop%5C%5Crepos%5C%5Croman-story%5C%5Cfrontend%5C%5Csrc%5C%5Capp%5C%5Crome%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ _N_E = __webpack_exports__;
/******/ }
]);